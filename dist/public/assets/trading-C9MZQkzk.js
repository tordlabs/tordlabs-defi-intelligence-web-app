import{c as le,R as O,r as c,a as Ws,u as ft,j as e,z as Ce,W as Be,d as Vs,e as Gs,X as ue,l as ht,D as Qs,L as nt,H as Ys,T as Xs,f as Ks,C as Js,p as Zs,k as er,i as lt}from"./index-BO6UIVYb.js";import{C as tr}from"./coins-BbZ5zc1o.js";import{L as sr,a as se}from"./log-out-g70RlAZx.js";import{C as es,M as ct}from"./minus-B82DAr0a.js";import{S as Kt}from"./star-JFY3V7Vs.js";import{P as dt}from"./plus-C2n5DFj1.js";import{S as rr}from"./search-CoIw3Gd7.js";const ar=[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]],ze=le("arrow-down-to-line",ar);const ir=[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]],$e=le("arrow-up-from-line",ir);const or=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ts=le("circle-question-mark",or);const nr=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Jt=le("dollar-sign",nr);const lr=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],mt=le("history",lr);const cr=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],dr=le("triangle-alert",cr);const hr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],mr=le("user-plus",hr);var xr=Object.defineProperty,He=Object.getOwnPropertySymbols,ss=Object.prototype.hasOwnProperty,rs=Object.prototype.propertyIsEnumerable,Zt=(s,o,n)=>o in s?xr(s,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[o]=n,xt=(s,o)=>{for(var n in o||(o={}))ss.call(o,n)&&Zt(s,n,o[n]);if(He)for(var n of He(o))rs.call(o,n)&&Zt(s,n,o[n]);return s},ut=(s,o)=>{var n={};for(var u in s)ss.call(s,u)&&o.indexOf(u)<0&&(n[u]=s[u]);if(s!=null&&He)for(var u of He(s))o.indexOf(u)<0&&rs.call(s,u)&&(n[u]=s[u]);return n};var ne;(s=>{const o=class C{constructor(r,i,a,l){if(this.version=r,this.errorCorrectionLevel=i,this.modules=[],this.isFunction=[],r<C.MIN_VERSION||r>C.MAX_VERSION)throw new RangeError("Version value out of range");if(l<-1||l>7)throw new RangeError("Mask value out of range");this.size=r*4+17;let d=[];for(let h=0;h<this.size;h++)d.push(!1);for(let h=0;h<this.size;h++)this.modules.push(d.slice()),this.isFunction.push(d.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(a);if(this.drawCodewords(x),l==-1){let h=1e9;for(let w=0;w<8;w++){this.applyMask(w),this.drawFormatBits(w);const f=this.getPenaltyScore();f<h&&(l=w,h=f),this.applyMask(w)}}b(0<=l&&l<=7),this.mask=l,this.applyMask(l),this.drawFormatBits(l),this.isFunction=[]}static encodeText(r,i){const a=s.QrSegment.makeSegments(r);return C.encodeSegments(a,i)}static encodeBinary(r,i){const a=s.QrSegment.makeBytes(r);return C.encodeSegments([a],i)}static encodeSegments(r,i,a=1,l=40,d=-1,x=!0){if(!(C.MIN_VERSION<=a&&a<=l&&l<=C.MAX_VERSION)||d<-1||d>7)throw new RangeError("Invalid value");let h,w;for(h=a;;h++){const p=C.getNumDataCodewords(h,i)*8,E=S.getTotalBits(r,h);if(E<=p){w=E;break}if(h>=l)throw new RangeError("Data too long")}for(const p of[C.Ecc.MEDIUM,C.Ecc.QUARTILE,C.Ecc.HIGH])x&&w<=C.getNumDataCodewords(h,p)*8&&(i=p);let f=[];for(const p of r){n(p.mode.modeBits,4,f),n(p.numChars,p.mode.numCharCountBits(h),f);for(const E of p.getData())f.push(E)}b(f.length==w);const _=C.getNumDataCodewords(h,i)*8;b(f.length<=_),n(0,Math.min(4,_-f.length),f),n(0,(8-f.length%8)%8,f),b(f.length%8==0);for(let p=236;f.length<_;p^=253)n(p,8,f);let L=[];for(;L.length*8<f.length;)L.push(0);return f.forEach((p,E)=>L[E>>>3]|=p<<7-(E&7)),new C(h,i,L,d)}getModule(r,i){return 0<=r&&r<this.size&&0<=i&&i<this.size&&this.modules[i][r]}getModules(){return this.modules}drawFunctionPatterns(){for(let a=0;a<this.size;a++)this.setFunctionModule(6,a,a%2==0),this.setFunctionModule(a,6,a%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const r=this.getAlignmentPatternPositions(),i=r.length;for(let a=0;a<i;a++)for(let l=0;l<i;l++)a==0&&l==0||a==0&&l==i-1||a==i-1&&l==0||this.drawAlignmentPattern(r[a],r[l]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(r){const i=this.errorCorrectionLevel.formatBits<<3|r;let a=i;for(let d=0;d<10;d++)a=a<<1^(a>>>9)*1335;const l=(i<<10|a)^21522;b(l>>>15==0);for(let d=0;d<=5;d++)this.setFunctionModule(8,d,u(l,d));this.setFunctionModule(8,7,u(l,6)),this.setFunctionModule(8,8,u(l,7)),this.setFunctionModule(7,8,u(l,8));for(let d=9;d<15;d++)this.setFunctionModule(14-d,8,u(l,d));for(let d=0;d<8;d++)this.setFunctionModule(this.size-1-d,8,u(l,d));for(let d=8;d<15;d++)this.setFunctionModule(8,this.size-15+d,u(l,d));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let r=this.version;for(let a=0;a<12;a++)r=r<<1^(r>>>11)*7973;const i=this.version<<12|r;b(i>>>18==0);for(let a=0;a<18;a++){const l=u(i,a),d=this.size-11+a%3,x=Math.floor(a/3);this.setFunctionModule(d,x,l),this.setFunctionModule(x,d,l)}}drawFinderPattern(r,i){for(let a=-4;a<=4;a++)for(let l=-4;l<=4;l++){const d=Math.max(Math.abs(l),Math.abs(a)),x=r+l,h=i+a;0<=x&&x<this.size&&0<=h&&h<this.size&&this.setFunctionModule(x,h,d!=2&&d!=4)}}drawAlignmentPattern(r,i){for(let a=-2;a<=2;a++)for(let l=-2;l<=2;l++)this.setFunctionModule(r+l,i+a,Math.max(Math.abs(l),Math.abs(a))!=1)}setFunctionModule(r,i,a){this.modules[i][r]=a,this.isFunction[i][r]=!0}addEccAndInterleave(r){const i=this.version,a=this.errorCorrectionLevel;if(r.length!=C.getNumDataCodewords(i,a))throw new RangeError("Invalid argument");const l=C.NUM_ERROR_CORRECTION_BLOCKS[a.ordinal][i],d=C.ECC_CODEWORDS_PER_BLOCK[a.ordinal][i],x=Math.floor(C.getNumRawDataModules(i)/8),h=l-x%l,w=Math.floor(x/l);let f=[];const _=C.reedSolomonComputeDivisor(d);for(let p=0,E=0;p<l;p++){let U=r.slice(E,E+w-d+(p<h?0:1));E+=U.length;const M=C.reedSolomonComputeRemainder(U,_);p<h&&U.push(0),f.push(U.concat(M))}let L=[];for(let p=0;p<f[0].length;p++)f.forEach((E,U)=>{(p!=w-d||U>=h)&&L.push(E[p])});return b(L.length==x),L}drawCodewords(r){if(r.length!=Math.floor(C.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let i=0;for(let a=this.size-1;a>=1;a-=2){a==6&&(a=5);for(let l=0;l<this.size;l++)for(let d=0;d<2;d++){const x=a-d,w=(a+1&2)==0?this.size-1-l:l;!this.isFunction[w][x]&&i<r.length*8&&(this.modules[w][x]=u(r[i>>>3],7-(i&7)),i++)}}b(i==r.length*8)}applyMask(r){if(r<0||r>7)throw new RangeError("Mask value out of range");for(let i=0;i<this.size;i++)for(let a=0;a<this.size;a++){let l;switch(r){case 0:l=(a+i)%2==0;break;case 1:l=i%2==0;break;case 2:l=a%3==0;break;case 3:l=(a+i)%3==0;break;case 4:l=(Math.floor(a/3)+Math.floor(i/2))%2==0;break;case 5:l=a*i%2+a*i%3==0;break;case 6:l=(a*i%2+a*i%3)%2==0;break;case 7:l=((a+i)%2+a*i%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[i][a]&&l&&(this.modules[i][a]=!this.modules[i][a])}}getPenaltyScore(){let r=0;for(let d=0;d<this.size;d++){let x=!1,h=0,w=[0,0,0,0,0,0,0];for(let f=0;f<this.size;f++)this.modules[d][f]==x?(h++,h==5?r+=C.PENALTY_N1:h>5&&r++):(this.finderPenaltyAddHistory(h,w),x||(r+=this.finderPenaltyCountPatterns(w)*C.PENALTY_N3),x=this.modules[d][f],h=1);r+=this.finderPenaltyTerminateAndCount(x,h,w)*C.PENALTY_N3}for(let d=0;d<this.size;d++){let x=!1,h=0,w=[0,0,0,0,0,0,0];for(let f=0;f<this.size;f++)this.modules[f][d]==x?(h++,h==5?r+=C.PENALTY_N1:h>5&&r++):(this.finderPenaltyAddHistory(h,w),x||(r+=this.finderPenaltyCountPatterns(w)*C.PENALTY_N3),x=this.modules[f][d],h=1);r+=this.finderPenaltyTerminateAndCount(x,h,w)*C.PENALTY_N3}for(let d=0;d<this.size-1;d++)for(let x=0;x<this.size-1;x++){const h=this.modules[d][x];h==this.modules[d][x+1]&&h==this.modules[d+1][x]&&h==this.modules[d+1][x+1]&&(r+=C.PENALTY_N2)}let i=0;for(const d of this.modules)i=d.reduce((x,h)=>x+(h?1:0),i);const a=this.size*this.size,l=Math.ceil(Math.abs(i*20-a*10)/a)-1;return b(0<=l&&l<=9),r+=l*C.PENALTY_N4,b(0<=r&&r<=2568888),r}getAlignmentPatternPositions(){if(this.version==1)return[];{const r=Math.floor(this.version/7)+2,i=this.version==32?26:Math.ceil((this.version*4+4)/(r*2-2))*2;let a=[6];for(let l=this.size-7;a.length<r;l-=i)a.splice(1,0,l);return a}}static getNumRawDataModules(r){if(r<C.MIN_VERSION||r>C.MAX_VERSION)throw new RangeError("Version number out of range");let i=(16*r+128)*r+64;if(r>=2){const a=Math.floor(r/7)+2;i-=(25*a-10)*a-55,r>=7&&(i-=36)}return b(208<=i&&i<=29648),i}static getNumDataCodewords(r,i){return Math.floor(C.getNumRawDataModules(r)/8)-C.ECC_CODEWORDS_PER_BLOCK[i.ordinal][r]*C.NUM_ERROR_CORRECTION_BLOCKS[i.ordinal][r]}static reedSolomonComputeDivisor(r){if(r<1||r>255)throw new RangeError("Degree out of range");let i=[];for(let l=0;l<r-1;l++)i.push(0);i.push(1);let a=1;for(let l=0;l<r;l++){for(let d=0;d<i.length;d++)i[d]=C.reedSolomonMultiply(i[d],a),d+1<i.length&&(i[d]^=i[d+1]);a=C.reedSolomonMultiply(a,2)}return i}static reedSolomonComputeRemainder(r,i){let a=i.map(l=>0);for(const l of r){const d=l^a.shift();a.push(0),i.forEach((x,h)=>a[h]^=C.reedSolomonMultiply(x,d))}return a}static reedSolomonMultiply(r,i){if(r>>>8||i>>>8)throw new RangeError("Byte out of range");let a=0;for(let l=7;l>=0;l--)a=a<<1^(a>>>7)*285,a^=(i>>>l&1)*r;return b(a>>>8==0),a}finderPenaltyCountPatterns(r){const i=r[1];b(i<=this.size*3);const a=i>0&&r[2]==i&&r[3]==i*3&&r[4]==i&&r[5]==i;return(a&&r[0]>=i*4&&r[6]>=i?1:0)+(a&&r[6]>=i*4&&r[0]>=i?1:0)}finderPenaltyTerminateAndCount(r,i,a){return r&&(this.finderPenaltyAddHistory(i,a),i=0),i+=this.size,this.finderPenaltyAddHistory(i,a),this.finderPenaltyCountPatterns(a)}finderPenaltyAddHistory(r,i){i[0]==0&&(r+=this.size),i.pop(),i.unshift(r)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],s.QrCode=o;function n(j,r,i){if(r<0||r>31||j>>>r)throw new RangeError("Value out of range");for(let a=r-1;a>=0;a--)i.push(j>>>a&1)}function u(j,r){return(j>>>r&1)!=0}function b(j){if(!j)throw new Error("Assertion error")}const g=class I{constructor(r,i,a){if(this.mode=r,this.numChars=i,this.bitData=a,i<0)throw new RangeError("Invalid argument");this.bitData=a.slice()}static makeBytes(r){let i=[];for(const a of r)n(a,8,i);return new I(I.Mode.BYTE,r.length,i)}static makeNumeric(r){if(!I.isNumeric(r))throw new RangeError("String contains non-numeric characters");let i=[];for(let a=0;a<r.length;){const l=Math.min(r.length-a,3);n(parseInt(r.substring(a,a+l),10),l*3+1,i),a+=l}return new I(I.Mode.NUMERIC,r.length,i)}static makeAlphanumeric(r){if(!I.isAlphanumeric(r))throw new RangeError("String contains unencodable characters in alphanumeric mode");let i=[],a;for(a=0;a+2<=r.length;a+=2){let l=I.ALPHANUMERIC_CHARSET.indexOf(r.charAt(a))*45;l+=I.ALPHANUMERIC_CHARSET.indexOf(r.charAt(a+1)),n(l,11,i)}return a<r.length&&n(I.ALPHANUMERIC_CHARSET.indexOf(r.charAt(a)),6,i),new I(I.Mode.ALPHANUMERIC,r.length,i)}static makeSegments(r){return r==""?[]:I.isNumeric(r)?[I.makeNumeric(r)]:I.isAlphanumeric(r)?[I.makeAlphanumeric(r)]:[I.makeBytes(I.toUtf8ByteArray(r))]}static makeEci(r){let i=[];if(r<0)throw new RangeError("ECI assignment value out of range");if(r<128)n(r,8,i);else if(r<16384)n(2,2,i),n(r,14,i);else if(r<1e6)n(6,3,i),n(r,21,i);else throw new RangeError("ECI assignment value out of range");return new I(I.Mode.ECI,0,i)}static isNumeric(r){return I.NUMERIC_REGEX.test(r)}static isAlphanumeric(r){return I.ALPHANUMERIC_REGEX.test(r)}getData(){return this.bitData.slice()}static getTotalBits(r,i){let a=0;for(const l of r){const d=l.mode.numCharCountBits(i);if(l.numChars>=1<<d)return 1/0;a+=4+d+l.bitData.length}return a}static toUtf8ByteArray(r){r=encodeURI(r);let i=[];for(let a=0;a<r.length;a++)r.charAt(a)!="%"?i.push(r.charCodeAt(a)):(i.push(parseInt(r.substring(a+1,a+3),16)),a+=2);return i}};g.NUMERIC_REGEX=/^[0-9]*$/,g.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,g.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let S=g;s.QrSegment=g})(ne||(ne={}));(s=>{(o=>{const n=class{constructor(b,g){this.ordinal=b,this.formatBits=g}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),o.Ecc=n})(s.QrCode||(s.QrCode={}))})(ne||(ne={}));(s=>{(o=>{const n=class{constructor(b,g){this.modeBits=b,this.numBitsCharCount=g}numCharCountBits(b){return this.numBitsCharCount[Math.floor((b+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),o.Mode=n})(s.QrSegment||(s.QrSegment={}))})(ne||(ne={}));var ge=ne;var ur={L:ge.QrCode.Ecc.LOW,M:ge.QrCode.Ecc.MEDIUM,Q:ge.QrCode.Ecc.QUARTILE,H:ge.QrCode.Ecc.HIGH},as=128,is="L",os="#FFFFFF",ns="#000000",ls=!1,cs=1,gr=4,pr=0,fr=.1;function ds(s,o=0){const n=[];return s.forEach(function(u,b){let g=null;u.forEach(function(S,j){if(!S&&g!==null){n.push(`M${g+o} ${b+o}h${j-g}v1H${g+o}z`),g=null;return}if(j===u.length-1){if(!S)return;g===null?n.push(`M${j+o},${b+o} h1v1H${j+o}z`):n.push(`M${g+o},${b+o} h${j+1-g}v1H${g+o}z`);return}S&&g===null&&(g=j)})}),n.join("")}function hs(s,o){return s.slice().map((n,u)=>u<o.y||u>=o.y+o.h?n:n.map((b,g)=>g<o.x||g>=o.x+o.w?b:!1))}function br(s,o,n,u){if(u==null)return null;const b=s.length+n*2,g=Math.floor(o*fr),S=b/o,j=(u.width||g)*S,r=(u.height||g)*S,i=u.x==null?s.length/2-j/2:u.x*S,a=u.y==null?s.length/2-r/2:u.y*S,l=u.opacity==null?1:u.opacity;let d=null;if(u.excavate){let h=Math.floor(i),w=Math.floor(a),f=Math.ceil(j+i-h),_=Math.ceil(r+a-w);d={x:h,y:w,w:f,h:_}}const x=u.crossOrigin;return{x:i,y:a,h:r,w:j,excavation:d,opacity:l,crossOrigin:x}}function wr(s,o){return o!=null?Math.max(Math.floor(o),0):s?gr:pr}function ms({value:s,level:o,minVersion:n,includeMargin:u,marginSize:b,imageSettings:g,size:S,boostLevel:j}){let r=O.useMemo(()=>{const h=(Array.isArray(s)?s:[s]).reduce((w,f)=>(w.push(...ge.QrSegment.makeSegments(f)),w),[]);return ge.QrCode.encodeSegments(h,ur[o],n,void 0,void 0,j)},[s,o,n,j]);const{cells:i,margin:a,numCells:l,calculatedImageSettings:d}=O.useMemo(()=>{let x=r.getModules();const h=wr(u,b),w=x.length+h*2,f=br(x,S,h,g);return{cells:x,margin:h,numCells:w,calculatedImageSettings:f}},[r,S,g,u,b]);return{qrcode:r,margin:a,cells:i,numCells:l,calculatedImageSettings:d}}var vr=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),yr=O.forwardRef(function(o,n){const u=o,{value:b,size:g=as,level:S=is,bgColor:j=os,fgColor:r=ns,includeMargin:i=ls,minVersion:a=cs,boostLevel:l,marginSize:d,imageSettings:x}=u,w=ut(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:f}=w,_=ut(w,["style"]),L=x?.src,p=O.useRef(null),E=O.useRef(null),U=O.useCallback($=>{p.current=$,typeof n=="function"?n($):n&&(n.current=$)},[n]),[M,J]=O.useState(!1),{margin:P,cells:Z,numCells:V,calculatedImageSettings:B}=ms({value:b,level:S,minVersion:a,boostLevel:l,includeMargin:i,marginSize:d,imageSettings:x,size:g});O.useEffect(()=>{if(p.current!=null){const $=p.current,z=$.getContext("2d");if(!z)return;let re=Z;const G=E.current,v=B!=null&&G!==null&&G.complete&&G.naturalHeight!==0&&G.naturalWidth!==0;v&&B.excavation!=null&&(re=hs(Z,B.excavation));const q=window.devicePixelRatio||1;$.height=$.width=g*q;const ae=g/V*q;z.scale(ae,ae),z.fillStyle=j,z.fillRect(0,0,V,V),z.fillStyle=r,vr?z.fill(new Path2D(ds(re,P))):Z.forEach(function(pe,T){pe.forEach(function(W,ee){W&&z.fillRect(ee+P,T+P,1,1)})}),B&&(z.globalAlpha=B.opacity),v&&z.drawImage(G,B.x+P,B.y+P,B.w,B.h)}}),O.useEffect(()=>{J(!1)},[L]);const ce=xt({height:g,width:g},f);let de=null;return L!=null&&(de=O.createElement("img",{src:L,key:L,style:{display:"none"},onLoad:()=>{J(!0)},ref:E,crossOrigin:B?.crossOrigin})),O.createElement(O.Fragment,null,O.createElement("canvas",xt({style:ce,height:g,width:g,ref:U,role:"img"},_)),de)});yr.displayName="QRCodeCanvas";var xs=O.forwardRef(function(o,n){const u=o,{value:b,size:g=as,level:S=is,bgColor:j=os,fgColor:r=ns,includeMargin:i=ls,minVersion:a=cs,boostLevel:l,title:d,marginSize:x,imageSettings:h}=u,w=ut(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:f,cells:_,numCells:L,calculatedImageSettings:p}=ms({value:b,level:S,minVersion:a,boostLevel:l,includeMargin:i,marginSize:x,imageSettings:h,size:g});let E=_,U=null;h!=null&&p!=null&&(p.excavation!=null&&(E=hs(_,p.excavation)),U=O.createElement("image",{href:h.src,height:p.h,width:p.w,x:p.x+f,y:p.y+f,preserveAspectRatio:"none",opacity:p.opacity,crossOrigin:p.crossOrigin}));const M=ds(E,f);return O.createElement("svg",xt({height:g,width:g,viewBox:`0 0 ${L} ${L}`,ref:n,role:"img"},w),!!d&&O.createElement("title",null,d),O.createElement("path",{fill:j,d:`M0,0 h${L}v${L}H0z`,shapeRendering:"crispEdges"}),O.createElement("path",{fill:r,d:M,shapeRendering:"crispEdges"}),U)});xs.displayName="QRCodeSVG";function jr({isConnected:s,walletAddress:o,platformBalance:n,totalValue:u,unrealizedPnl:b,availableBalance:g,marginUsed:S,onCreateAccount:j,onDeposit:r,onWithdraw:i,onTradeHistory:a,onDepositWithdrawHistory:l,onLogout:d}){const[x,h]=c.useState(!1),[w,f]=c.useState({x:-1,y:-1}),[_,L]=c.useState(!1),p=c.useRef(null),E=c.useRef(null),{data:U}=Ws(),{t:M}=ft(),[J,P]=c.useState(null),[Z,V]=c.useState(!1),[B,ce]=c.useState(!1),de=U?.twitter_url||"https://x.com/torddefi",$=U?.telegram_url||"https://t.me/TordLabs",z=U?.github_url||"https://github.com/tordlabs";c.useEffect(()=>{if(!o){P(null);return}let T=!1;return V(!0),fetch(`/api/tord-balance?wallet=${o}`).then(W=>W.json()).then(W=>{T||P(W.balance??0)}).catch(()=>{T||P(null)}).finally(()=>{T||V(!1)}),()=>{T=!0}},[o]),c.useEffect(()=>{w.x===-1&&f({x:window.innerWidth-70,y:Math.min(window.innerHeight-80,window.innerHeight*.75)})},[]);const re=c.useCallback(T=>{T.preventDefault(),L(!0),p.current={startX:T.clientX,startY:T.clientY,startPosX:w.x,startPosY:w.y,moved:!1},T.target.setPointerCapture(T.pointerId)},[w]),G=c.useCallback(T=>{if(!p.current)return;const W=T.clientX-p.current.startX,ee=T.clientY-p.current.startY;(Math.abs(W)>3||Math.abs(ee)>3)&&(p.current.moved=!0);const Te=56,fe=Math.max(4,Math.min(window.innerWidth-Te-4,p.current.startPosX+W)),qe=Math.max(4,Math.min(window.innerHeight-Te-4,p.current.startPosY+ee));f({x:fe,y:qe})},[]),v=c.useCallback(T=>{p.current&&!p.current.moved&&h(W=>!W),L(!1),p.current=null,T.target.releasePointerCapture(T.pointerId)},[]),q=c.useCallback(T=>{T(),h(!1)},[]),ae=w.x<window.innerWidth/2?0:-224,pe=w.y>window.innerHeight/2?"bottom":"top";return e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{className:"fixed inset-0 z-[998]",onClick:()=>h(!1)}),e.jsxs("div",{ref:E,className:"fixed z-[999]",style:{left:w.x,top:w.y,touchAction:"none"},children:[e.jsx("div",{className:`absolute transition-all duration-300 ${x?"opacity-100 scale-100":"opacity-0 scale-75 pointer-events-none"}`,style:{left:ae,...pe==="bottom"?{bottom:64}:{top:64}},children:e.jsxs("div",{className:"bg-black/95 backdrop-blur-xl border border-white/10 rounded-2xl p-3 w-56 shadow-2xl shadow-black/50","data-testid":"trading-assistive-menu",children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-widest px-3 pt-1 pb-2",children:M("tradingAssistive.menu")||"Trading"}),o&&e.jsxs("div",{className:"px-3 pb-2 space-y-1.5",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(tr,{className:"h-3.5 w-3.5 text-amber-400"}),e.jsx("span",{className:"text-[10px] text-amber-300",children:"$TORD"})]}),e.jsx("span",{className:"text-xs font-bold text-amber-400","data-testid":"text-tord-balance",children:Z?"...":J!==null?Number(J).toLocaleString():"--"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-primary/10 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Be,{className:"h-3.5 w-3.5 text-primary"}),e.jsx("span",{className:"text-[10px] text-primary/80",children:M("tradingAssistive.deposited")||"Deposited"})]}),e.jsxs("span",{className:"text-xs font-bold text-primary","data-testid":"text-deposited-balance",children:[n?parseFloat(n).toFixed(2):"0.00"," USDT"]})]}),e.jsxs("div",{className:"space-y-1 mt-1.5 px-0.5",children:[e.jsxs("div",{className:"flex justify-between text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:M("trading.totalValue")||"Total Value"}),e.jsxs("span",{className:"text-white",children:[u||"0.00"," USDT"]})]}),e.jsxs("div",{className:"flex justify-between text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:M("trading.unrealizedPnl")||"Unrealized PnL"}),e.jsxs("span",{className:b&&parseFloat(b)>=0?"text-green-400":"text-red-400",children:[b||"0.00"," USDT"]})]}),e.jsxs("div",{className:"flex justify-between text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:M("trading.availBalance")||"Available"}),e.jsxs("span",{className:"text-white",children:[g||"0.00"," USDT"]})]}),e.jsxs("div",{className:"flex justify-between text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:M("trading.margin")||"Margin"}),e.jsxs("span",{className:"text-white",children:[S||"0.00"," USDT"]})]})]}),e.jsx("div",{className:"h-px bg-white/10 mt-1"})]}),s?e.jsxs(e.Fragment,{children:[e.jsx(oe,{icon:e.jsx(ze,{className:"h-4 w-4"}),label:M("trading.deposit")||"Deposit",onClick:()=>q(r),testId:"assistive-deposit"}),e.jsx(oe,{icon:e.jsx($e,{className:"h-4 w-4"}),label:M("trading.withdraw")||"Withdraw",onClick:()=>q(i),testId:"assistive-withdraw"}),e.jsx("div",{className:"h-px bg-white/10 my-1.5"}),e.jsx(oe,{icon:e.jsx(mt,{className:"h-4 w-4"}),label:M("tradingAssistive.tradeHistory")||"Trade History",onClick:()=>q(a),testId:"assistive-trade-history"}),e.jsx(oe,{icon:e.jsx(mt,{className:"h-4 w-4"}),label:M("tradingAssistive.depositWithdrawHistory")||"Deposit & Withdraw History",onClick:()=>q(l),testId:"assistive-dw-history"}),e.jsx("div",{className:"h-px bg-white/10 my-1.5"}),e.jsx(oe,{icon:e.jsx(sr,{className:"h-4 w-4 text-red-400"}),label:M("tradingAssistive.logout")||"Log Out",onClick:()=>q(d),testId:"assistive-logout",danger:!0})]}):e.jsx(oe,{icon:e.jsx(mr,{className:"h-4 w-4"}),label:M("tradingAssistive.createAccount")||"Create Account",onClick:()=>q(j),testId:"assistive-create-account"}),e.jsx("div",{className:"h-px bg-white/10 my-1.5"}),e.jsx(oe,{icon:e.jsx(ts,{className:"h-4 w-4"}),label:M("tradingAssistive.howToUse")||"How to Use",onClick:()=>{ce(!0),h(!1)},testId:"assistive-how-to-use"}),e.jsx("div",{className:"h-px bg-white/10 my-2"}),e.jsxs("div",{className:"flex items-center justify-center gap-3 px-3 py-2",children:[e.jsx("a",{href:de,target:"_blank",rel:"noopener noreferrer","data-testid":"assistive-social-twitter",className:"p-2 rounded-lg text-muted-foreground hover:text-primary hover:bg-white/5 transition-colors",children:e.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),e.jsx("a",{href:$,target:"_blank",rel:"noopener noreferrer","data-testid":"assistive-social-telegram",className:"p-2 rounded-lg text-muted-foreground hover:text-primary hover:bg-white/5 transition-colors",children:e.jsx(Vs,{className:"h-4 w-4"})}),e.jsx("a",{href:z,target:"_blank",rel:"noopener noreferrer","data-testid":"assistive-social-github",className:"p-2 rounded-lg text-muted-foreground hover:text-primary hover:bg-white/5 transition-colors",children:e.jsx(Gs,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{onPointerDown:re,onPointerMove:G,onPointerUp:v,className:`neon-snake-btn w-14 h-14 rounded-full flex items-center justify-center cursor-grab active:cursor-grabbing select-none transition-all duration-200 bg-black border border-white/10 hover:scale-110 hover:border-primary/30 ${_?"scale-110":""}`,style:{boxShadow:"0 0 8px rgba(255,215,0,0.12), 0 2px 10px rgba(0,0,0,0.3)",transition:"transform 0.2s, box-shadow 0.2s, border-color 0.2s"},onMouseEnter:T=>{T.currentTarget.style.boxShadow="0 0 14px rgba(255,215,0,0.2), 0 2px 14px rgba(0,0,0,0.35)"},onMouseLeave:T=>{T.currentTarget.style.boxShadow="0 0 8px rgba(255,215,0,0.12), 0 2px 10px rgba(0,0,0,0.3)"},"data-testid":"btn-trading-assistive","aria-label":"Trading Menu",children:x?e.jsx(ue,{className:"h-5 w-5 text-white pointer-events-none"}):e.jsx("img",{src:"/logo.png",alt:"Menu",className:"w-9 h-9 pointer-events-none",style:{filter:"drop-shadow(0 0 8px rgba(255,215,0,0.4)) drop-shadow(0 0 20px rgba(255,215,0,0.2))"}})})]}),B&&Ce.createPortal(e.jsx(Nr,{onClose:()=>ce(!1)}),document.body)]})}function Nr({onClose:s}){const{t:o}=ft(),[n,u]=c.useState(null),b=S=>{u(n===S?null:S)},g=[{title:o("guide.gettingStarted.title")||"Getting Started",content:o("guide.gettingStarted.content")||`1. Connect your wallet using the wallet button in the top right corner.
2. Create a trading account — you need a minimum of 1,000,000 $TORD tokens in your wallet.
3. Deposit USDT to your trading account to start trading.
4. Select a trading pair from the dropdown menu (e.g., BTC/USDT, ETH/USDT).`},{title:o("guide.orderTypes.title")||"Order Types",content:o("guide.orderTypes.content")||`Market Order: Executes immediately at the best available price. Fast but price may vary.

Limit Order: Sets a specific price. The order only executes when the market reaches your price. Good for precise entry/exit.

Stop Limit Order: A two-price order. Set a trigger price and a limit price. When the trigger price is reached, a limit order is placed at your limit price.`},{title:o("guide.leverage.title")||"Leverage & Margin",content:o("guide.leverage.content")||`Leverage multiplies your position size. For example, 20x leverage means a $100 deposit controls a $2,000 position.

Cross Margin: Shares your entire account balance across all positions. More flexible but riskier.

Isolated Margin: Only uses the margin allocated to each position. Limits your loss to that specific position's margin.

Higher leverage = higher potential profit AND higher potential loss.`},{title:o("guide.trading.title")||"Placing a Trade",content:o("guide.trading.content")||`1. Choose your trading pair (e.g., BTC/USDT).
2. Select order type: Market, Limit, or Stop Limit.
3. Choose leverage (1x to 125x).
4. Enter the amount you want to trade.
5. Click "Buy / Long" if you expect the price to go UP.
6. Click "Sell / Short" if you expect the price to go DOWN.

Tip: Click any price in the Order Book to quickly set it as your limit price.`},{title:o("guide.tpsl.title")||"Take Profit / Stop Loss (TP/SL)",content:o("guide.tpsl.content")||`TP/SL helps you manage risk automatically:

Take Profit (TP): Automatically closes your position when the price reaches your profit target.

Stop Loss (SL): Automatically closes your position to limit losses when the price moves against you.

Enable TP/SL by checking the "TP/SL" checkbox before placing your order.`},{title:o("guide.positions.title")||"Managing Positions",content:o("guide.positions.content")||`View your open positions in the "Positions" tab below the chart.

Each position shows:
• Entry price and current price
• Position size and leverage
• Unrealized profit/loss (PnL)
• Liquidation price

You can close positions partially or fully from the positions tab.`},{title:o("guide.fees.title")||"Fees",content:o("guide.fees.content")||`Trading Fee: 0.125% per trade (combined platform and exchange fee).

Fees are automatically calculated and shown before you confirm your trade.

Deposit: No fee for depositing USDT.
Withdrawal: Minimum withdrawal amount applies.`}];return e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4","data-testid":"guide-modal-overlay",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:"relative w-full max-w-lg max-h-[85vh] flex flex-col bg-[#0a0a0f] border border-white/10 rounded-2xl shadow-2xl shadow-black/60 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-5 w-5 text-primary"}),e.jsx("h2",{className:"text-lg font-bold text-white",style:{fontFamily:"'Orbitron', sans-serif"},children:o("guide.title")||"How to Use"})]}),e.jsx("button",{onClick:s,className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors","data-testid":"guide-close-btn",children:e.jsx(ue,{className:"h-5 w-5 text-white"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:[g.map((S,j)=>e.jsxs("div",{className:"border border-white/10 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>b(j),className:"flex items-center justify-between w-full px-4 py-3 text-left hover:bg-white/5 transition-colors","data-testid":`guide-section-${j}`,children:[e.jsx("span",{className:"text-sm font-semibold text-white",children:S.title}),n===j?e.jsx(es,{className:"h-4 w-4 text-primary shrink-0"}):e.jsx(ht,{className:"h-4 w-4 text-muted-foreground shrink-0"})]}),n===j&&e.jsx("div",{className:"px-4 pb-3 text-sm text-muted-foreground whitespace-pre-line leading-relaxed",children:S.content})]},j)),e.jsx("div",{className:"mt-4 p-4 rounded-xl bg-red-500/10 border border-red-500/30",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(dr,{className:"h-5 w-5 text-red-400 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-red-400 mb-2",children:o("guide.riskWarning.title")||"Risk Warning"}),e.jsx("p",{className:"text-xs text-red-300/80 leading-relaxed",children:o("guide.riskWarning.content")||"Futures trading involves substantial risk and is not suitable for all investors. The high degree of leverage can work against you as well as for you. You could sustain a total loss of your initial margin and be required to deposit additional funds. Before trading, you should carefully consider your investment objectives, level of experience, and risk appetite. There is a possibility that you may sustain a loss of some or all of your initial investment. Only trade with funds you can afford to lose. If you are in doubt, please seek advice from an independent financial advisor."})]})]})})]}),e.jsx("div",{className:"p-4 border-t border-white/10 shrink-0",children:e.jsx("button",{onClick:s,className:"w-full py-2.5 rounded-xl bg-primary/20 text-primary hover:bg-primary/30 font-semibold text-sm transition-colors","data-testid":"guide-understood-btn",children:o("guide.understood")||"I Understand"})})]})]})}function oe({icon:s,label:o,onClick:n,testId:u,danger:b}){return e.jsxs("button",{onClick:n,className:`flex items-center gap-3 w-full px-3 py-2.5 rounded-xl text-sm ${b?"text-red-400 hover:bg-red-500/10":"text-white hover:bg-white/10"} transition-colors`,"data-testid":u,children:[e.jsx("span",{className:b?"":"text-primary",children:s}),o]})}const gt=[{symbol:"TORDUSDT",base:"TORD",quote:"USDT",label:"TORD/USDT",icon:"",maxLev:50,categories:["All","Top"],vol24h:"22.7M",isCustom:!0,gateContract:""},{symbol:"BTCUSDT",base:"BTC",quote:"USDT",label:"BTC/USDT",icon:"btc",maxLev:100,categories:["All","Top"],vol24h:"74.9B",gateContract:"BTC_USDT"},{symbol:"ETHUSDT",base:"ETH",quote:"USDT",label:"ETH/USDT",icon:"eth",maxLev:100,categories:["All","Top","DeFi"],vol24h:"27.1B",gateContract:"ETH_USDT"},{symbol:"BNBUSDT",base:"BNB",quote:"USDT",label:"BNB/USDT",icon:"bnb",maxLev:100,categories:["All","Top"],vol24h:"10.3B",gateContract:"BNB_USDT"},{symbol:"SOLUSDT",base:"SOL",quote:"USDT",label:"SOL/USDT",icon:"sol",maxLev:100,categories:["All","Top","L2"],vol24h:"1.1B",gateContract:"SOL_USDT"},{symbol:"XRPUSDT",base:"XRP",quote:"USDT",label:"XRP/USDT",icon:"xrp",maxLev:100,categories:["All","Top"],vol24h:"81.8M",gateContract:"XRP_USDT"},{symbol:"ADAUSDT",base:"ADA",quote:"USDT",label:"ADA/USDT",icon:"ada",maxLev:75,categories:["All","Top"],vol24h:"15.3M",gateContract:"ADA_USDT"},{symbol:"DOGEUSDT",base:"DOGE",quote:"USDT",label:"DOGE/USDT",icon:"doge",maxLev:75,categories:["All","Meme"],vol24h:"1.2M",gateContract:"DOGE_USDT"},{symbol:"AVAXUSDT",base:"AVAX",quote:"USDT",label:"AVAX/USDT",icon:"avax",maxLev:100,categories:["All","Top","L2"],vol24h:"234.3M",gateContract:"AVAX_USDT"},{symbol:"DOTUSDT",base:"DOT",quote:"USDT",label:"DOT/USDT",icon:"dot",maxLev:100,categories:["All","Top"],vol24h:"28.4M",gateContract:"DOT_USDT"},{symbol:"LINKUSDT",base:"LINK",quote:"USDT",label:"LINK/USDT",icon:"link",maxLev:100,categories:["All","DeFi"],vol24h:"45.2M",gateContract:"LINK_USDT"},{symbol:"LTCUSDT",base:"LTC",quote:"USDT",label:"LTC/USDT",icon:"ltc",maxLev:100,categories:["All","Top"],vol24h:"32.1M",gateContract:"LTC_USDT"},{symbol:"UNIUSDT",base:"UNI",quote:"USDT",label:"UNI/USDT",icon:"uni",maxLev:100,categories:["All","DeFi"],vol24h:"18.7M",gateContract:"UNI_USDT"},{symbol:"AAVEUSDT",base:"AAVE",quote:"USDT",label:"AAVE/USDT",icon:"aave",maxLev:100,categories:["All","DeFi"],vol24h:"12.5M",gateContract:"AAVE_USDT"},{symbol:"NEARUSDT",base:"NEAR",quote:"USDT",label:"NEAR/USDT",icon:"",maxLev:100,categories:["All","L2"],vol24h:"9.8M",gateContract:"NEAR_USDT"},{symbol:"ARBUSDT",base:"ARB",quote:"USDT",label:"ARB/USDT",icon:"",maxLev:100,categories:["All","L2"],vol24h:"55.3M",gateContract:"ARB_USDT"},{symbol:"OPUSDT",base:"OP",quote:"USDT",label:"OP/USDT",icon:"",maxLev:100,categories:["All","L2"],vol24h:"38.1M",gateContract:"OP_USDT"},{symbol:"SUIUSDT",base:"SUI",quote:"USDT",label:"SUI/USDT",icon:"",maxLev:100,categories:["All","L2","AI"],vol24h:"67.9M",gateContract:"SUI_USDT"},{symbol:"SEIUSDT",base:"SEI",quote:"USDT",label:"SEI/USDT",icon:"",maxLev:100,categories:["All","L2"],vol24h:"14.2M",gateContract:"SEI_USDT"},{symbol:"TIAUSDT",base:"TIA",quote:"USDT",label:"TIA/USDT",icon:"",maxLev:75,categories:["All","L2"],vol24h:"8.4M",gateContract:"TIA_USDT"},{symbol:"SHIBUSDT",base:"SHIB",quote:"USDT",label:"SHIB/USDT",icon:"shib",maxLev:50,categories:["All","Meme"],vol24h:"44.5M",gateContract:"1000SHIB_USDT"},{symbol:"PEPEUSDT",base:"PEPE",quote:"USDT",label:"PEPE/USDT",icon:"",maxLev:50,categories:["All","Meme"],vol24h:"88.2M",gateContract:"1000PEPE_USDT"},{symbol:"WIFUSDT",base:"WIF",quote:"USDT",label:"WIF/USDT",icon:"",maxLev:50,categories:["All","Meme"],vol24h:"22.1M",gateContract:"WIF_USDT"},{symbol:"FLOKIUSDT",base:"FLOKI",quote:"USDT",label:"FLOKI/USDT",icon:"",maxLev:50,categories:["All","Meme"],vol24h:"15.6M",gateContract:"1000FLOKI_USDT"},{symbol:"MKRUSDT",base:"MKR",quote:"USDT",label:"MKR/USDT",icon:"mkr",maxLev:75,categories:["All","DeFi"],vol24h:"5.3M",gateContract:"MKR_USDT"},{symbol:"CRVUSDT",base:"CRV",quote:"USDT",label:"CRV/USDT",icon:"",maxLev:75,categories:["All","DeFi"],vol24h:"7.8M",gateContract:"CRV_USDT"},{symbol:"FETUSDT",base:"FET",quote:"USDT",label:"FET/USDT",icon:"",maxLev:50,categories:["All","AI"],vol24h:"33.4M",gateContract:"FET_USDT"},{symbol:"RENDERUSDT",base:"RENDER",quote:"USDT",label:"RENDER/USDT",icon:"",maxLev:50,categories:["All","AI"],vol24h:"19.7M",gateContract:"RENDER_USDT"},{symbol:"TAOUSDT",base:"TAO",quote:"USDT",label:"TAO/USDT",icon:"",maxLev:50,categories:["All","AI"],vol24h:"42.1M",gateContract:"TAO_USDT"},{symbol:"ATOMUSDT",base:"ATOM",quote:"USDT",label:"ATOM/USDT",icon:"atom",maxLev:100,categories:["All","Top"],vol24h:"16.9M",gateContract:"ATOM_USDT"},{symbol:"APTUSDT",base:"APT",quote:"USDT",label:"APT/USDT",icon:"",maxLev:75,categories:["All","L2"],vol24h:"25.6M",gateContract:"APT_USDT"},{symbol:"INJUSDT",base:"INJ",quote:"USDT",label:"INJ/USDT",icon:"",maxLev:75,categories:["All","DeFi","AI"],vol24h:"31.2M",gateContract:"INJ_USDT"}],Sr=["All","Top","Meme","DeFi","L2","AI"],Cr={BTC:"https://assets.coingecko.com/coins/images/1/small/bitcoin.png",ETH:"https://assets.coingecko.com/coins/images/279/small/ethereum.png",BNB:"https://assets.coingecko.com/coins/images/825/small/bnb-icon2_2x.png",SOL:"https://assets.coingecko.com/coins/images/4128/small/solana.png",XRP:"https://assets.coingecko.com/coins/images/44/small/xrp-symbol-white-128.png",ADA:"https://assets.coingecko.com/coins/images/975/small/cardano.png",DOGE:"https://assets.coingecko.com/coins/images/5/small/dogecoin.png",AVAX:"https://assets.coingecko.com/coins/images/12559/small/Avalanche_Circle_RedWhite_Trans.png",DOT:"https://assets.coingecko.com/coins/images/12171/small/polkadot.png",LINK:"https://assets.coingecko.com/coins/images/877/small/chainlink-new-logo.png",LTC:"https://assets.coingecko.com/coins/images/2/small/litecoin.png",UNI:"https://assets.coingecko.com/coins/images/12504/small/uni.jpg",AAVE:"https://assets.coingecko.com/coins/images/12645/small/aave-token-round.png",NEAR:"https://assets.coingecko.com/coins/images/10365/small/near.jpg",ARB:"https://assets.coingecko.com/coins/images/16547/small/arb.jpg",OP:"https://assets.coingecko.com/coins/images/25244/small/Optimism.png",SUI:"https://assets.coingecko.com/coins/images/26375/small/sui-ocean-square.png",SEI:"https://assets.coingecko.com/coins/images/28205/small/Sei_Logo_-_Transparent.png",TIA:"https://assets.coingecko.com/coins/images/31967/small/tia.jpg",SHIB:"https://assets.coingecko.com/coins/images/11939/small/shiba.png",PEPE:"https://assets.coingecko.com/coins/images/29850/small/pepe-token.jpeg",WIF:"https://assets.coingecko.com/coins/images/33566/small/dogwifhat.jpg",FLOKI:"https://assets.coingecko.com/coins/images/16746/small/PNG_image.png",MKR:"https://assets.coingecko.com/coins/images/1364/small/Mark_Maker.png",CRV:"https://assets.coingecko.com/coins/images/12124/small/Curve.png",FET:"https://assets.coingecko.com/coins/images/5681/small/Fetch.jpg",RENDER:"https://assets.coingecko.com/coins/images/11636/small/rndr.png",TAO:"https://assets.coingecko.com/coins/images/28452/small/ARUsPeNQ_400x400.jpeg",ATOM:"https://assets.coingecko.com/coins/images/1481/small/cosmos_hub.png",APT:"https://assets.coingecko.com/coins/images/26455/small/aptos_round.png",INJ:"https://assets.coingecko.com/coins/images/12882/small/Secondary_Symbol.png"};function pt(s){return s.isCustom?"/logo.png":Cr[s.base]||`https://cdn.jsdelivr.net/npm/cryptocurrency-icons@latest/svg/color/${s.base.toLowerCase()}.svg`}function Rr(){const{t:s}=ft(),{toast:o}=Qs(),[n,u]=c.useState(gt[1]),[b,g]=c.useState(!1),[S,j]=c.useState(""),[r,i]=c.useState("All"),[a,l]=c.useState([]),[d,x]=c.useState("Market"),[h,w]=c.useState(20),[f,_]=c.useState("Cross"),[L,p]=c.useState(""),[E,U]=c.useState(""),[M,J]=c.useState("positions"),[P,Z]=c.useState(null),[V,B]=c.useState({asks:[],bids:[]}),[ce,de]=c.useState([]),[$,z]=c.useState("book"),[re,G]=c.useState(!1),[v,q]=c.useState(""),[ae,pe]=c.useState({}),[T,W]=c.useState(null),[ee,Te]=c.useState([]),[fe,qe]=c.useState([]),[bt,us]=c.useState([]),[wt,gs]=c.useState([]),[ke,vt]=c.useState(!1),[yt,jt]=c.useState(null),[Nt,St]=c.useState(null),[Ct,Tt]=c.useState(!1),[ps,fs]=c.useState("0.05%"),[De,Ae]=c.useState("deposit"),[bs,be]=c.useState(!1),[Ee,ws]=c.useState(!1),[Y,vs]=c.useState(null),[Me,kt]=c.useState(""),[we,Dt]=c.useState(""),[ve,We]=c.useState(""),[kr,Dr]=c.useState(""),[At,Et]=c.useState(!1),[Mt,Lt]=c.useState(!1),[Pt,ys]=c.useState([]),[Ut,js]=c.useState([]),[Ve,Ns]=c.useState(null),[Ge,Qe]=c.useState(!1),[Ft,It]=c.useState(!1),[Ss,te]=c.useState(!1),[Cs,Ye]=c.useState(!1),[Xe,Ts]=c.useState(!1),[H,ks]=c.useState(.1),[Ot,Rt]=c.useState(!1),[Ke,Ds]=c.useState(!1),[Le,_t]=c.useState(""),[Pe,Bt]=c.useState(""),[he,Ue]=c.useState(""),[zt,As]=c.useState(()=>{const t=localStorage.getItem("tord_chart_height");return t?parseInt(t):400}),[$t,Es]=c.useState(()=>{const t=localStorage.getItem("tord_tradeform_height");return t?parseInt(t):320}),Fe=c.useRef(null),ye=c.useRef(!1),Je=c.useRef(0),Ze=c.useRef(0),je=c.useRef("chart"),et=c.useRef(0);c.useEffect(()=>{const t=N=>{const D=(je.current==="chart",200),R=je.current==="chart"?800:600,A=Math.max(D,Math.min(R,Ze.current+N));et.current=A,je.current==="chart"?As(A):Es(A)},m=N=>{ye.current&&(N.preventDefault(),t(N.clientY-Je.current))},y=()=>{if(!ye.current)return;ye.current=!1,document.body.style.cursor="",document.body.style.userSelect="";const N=je.current==="chart"?"tord_chart_height":"tord_tradeform_height";localStorage.setItem(N,et.current.toString())},k=N=>{ye.current&&t(N.touches[0].clientY-Je.current)};return window.addEventListener("mousemove",m),window.addEventListener("mouseup",y),window.addEventListener("touchmove",k,{passive:!0}),window.addEventListener("touchend",y),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",y),window.removeEventListener("touchmove",k),window.removeEventListener("touchend",y)}},[]);const Ie=(t,m)=>{ye.current=!0,je.current=m,Je.current=t,Ze.current=m==="chart"?zt:$t,et.current=Ze.current,document.body.style.cursor="ns-resize",document.body.style.userSelect="none"},F=!!v,tt=async()=>{try{const t=window.ethereum;if(!t){alert("Please install MetaMask");return}const m=await t.request({method:"eth_requestAccounts"});m?.[0]&&(q(m[0]),o({title:s("trading.walletConnected")||"Wallet Connected",description:m[0].slice(0,6)+"..."+m[0].slice(-4)}))}catch{}},Ms=t=>{l(m=>m.includes(t)?m.filter(y=>y!==t):[...m,t])},Oe=c.useCallback(async()=>{if(v)try{const t=await fetch("/api/balance",{headers:{"x-wallet-address":v}});t.ok&&vs(await t.json())}catch{}},[v]),Ht=c.useCallback(async()=>{try{const t=await fetch("/api/deposit/info");t.ok&&Ns(await t.json())}catch{}},[]),st=c.useCallback(async()=>{if(v)try{const t=await fetch("/api/deposits",{headers:{"x-wallet-address":v}});t.ok&&ys(await t.json())}catch{}},[v]),rt=c.useCallback(async()=>{if(v)try{const t=await fetch("/api/withdrawals",{headers:{"x-wallet-address":v}});t.ok&&js(await t.json())}catch{}},[v]);c.useEffect(()=>{Ht()},[Ht]),c.useEffect(()=>{v&&(Oe(),st(),rt())},[v,Oe,st,rt]);const Ls=async()=>{if(!(!v||!we||!Me)){Et(!0);try{const t=await fetch("/api/deposit",{method:"POST",headers:{"Content-Type":"application/json","x-wallet-address":v},body:JSON.stringify({amount:we,txHash:Me})});if(t.ok)o({title:s("trading.depositSubmitted")||"Deposit Submitted",description:s("trading.depositPending")||"Pending confirmation"}),Dt(""),kt(""),st(),Oe();else{const m=await t.json();o({title:"Error",description:m.error,variant:"destructive"})}}catch{o({title:"Error",description:"Failed to submit deposit",variant:"destructive"})}Et(!1)}},Ps=async()=>{if(!(!v||!ve)){Lt(!0);try{const t=await fetch("/api/withdraw",{method:"POST",headers:{"Content-Type":"application/json","x-wallet-address":v},body:JSON.stringify({amount:ve})});if(t.ok)o({title:s("trading.withdrawSubmitted")||"Withdrawal Submitted",description:s("trading.withdrawPending")||"Pending processing"}),We(""),rt(),Oe();else{const m=await t.json();o({title:s("trading.insufficientBalance")||"Error",description:m.error,variant:"destructive"})}}catch{o({title:"Error",description:"Failed to submit withdrawal",variant:"destructive"})}Lt(!1)}},qt=c.useCallback(async()=>{if(v)try{const t=await fetch("/api/gateio/trading-account",{headers:{"x-wallet-address":v}});if(t.ok){const m=await t.json();Qe(m.exists)}}catch{}},[v]);c.useEffect(()=>{v&&qt()},[v,qt]);const Us=async()=>{if(!v){tt();return}if(!Ge){It(!0);try{const t=await fetch("/api/gateio/create-account",{method:"POST",headers:{"Content-Type":"application/json","x-wallet-address":v}}),m=await t.json();t.ok?(Qe(!0),te(!1),o({title:s("trading.accountCreated")||"Trading Account Created",description:s("trading.accountCreatedDesc")||"You can now start trading"}),ie()):m.code==="INSUFFICIENT_TORD"?o({title:s("trading.insufficientTord")||"Insufficient $TORD",description:s("trading.insufficientTordDesc")?.replace("{required}",Number(m.required).toLocaleString()).replace("{balance}",Number(m.balance).toLocaleString())||m.error,variant:"destructive"}):m.code==="NO_SLOTS_AVAILABLE"?(te(!1),Ye(!0)):o({title:"Error",description:m.error,variant:"destructive"})}catch{o({title:"Error",description:"Failed to create account",variant:"destructive"})}It(!1)}},Fs=t=>{navigator.clipboard.writeText(t),o({title:s("trading.copied")||"Copied!"})},Wt=t=>{switch(t){case"confirmed":case"completed":return"text-green-400";case"pending":return"text-yellow-400";case"rejected":return"text-red-400";default:return"text-muted-foreground"}},Vt=t=>{switch(t){case"confirmed":return s("trading.statusConfirmed")||"Confirmed";case"completed":return s("trading.statusCompleted")||"Completed";case"pending":return s("trading.statusPending")||"Pending";case"rejected":return s("trading.statusRejected")||"Rejected";default:return t}};c.useEffect(()=>{if(Fe.current){Fe.current.innerHTML="";const t=n.isCustom?"GATEIO:BTCUSDT":`GATEIO:${n.base}USDT`,m=`tv_chart_${Date.now()}`,y=document.createElement("div");y.id=m,y.style.cssText="width:100%;height:100%;",Fe.current.appendChild(y);const k=document.createElement("script");k.src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js",k.type="text/javascript",k.async=!0,k.innerHTML=JSON.stringify({autosize:!0,symbol:t,interval:"15",timezone:"Etc/UTC",theme:"dark",style:"1",locale:"en",backgroundColor:"rgba(10, 10, 10, 1)",gridColor:"rgba(255, 255, 255, 0.03)",hide_top_toolbar:!1,hide_legend:!0,hide_volume:!1,hide_side_toolbar:!1,allow_symbol_change:!1,calendar:!1,save_image:!1,enable_publishing:!1,support_host:"https://www.tradingview.com"});const N=document.createElement("div");N.className="tradingview-widget-container",N.style.cssText="width:100%;height:100%;";const D=document.createElement("div");D.className="tradingview-widget-container__widget",D.style.cssText="width:100%;height:100%;",N.appendChild(D),N.appendChild(k),y.appendChild(N)}},[n.symbol]),c.useEffect(()=>{fetch("/api/gateio/fee-info").then(t=>t.json()).then(t=>fs(t.totalFeePercent||"0.125%")).catch(()=>{})},[]);const Q=c.useCallback(()=>({"x-wallet-address":v}),[v]),ie=c.useCallback(()=>{F&&fetch("/api/gateio/account",{headers:Q()}).then(t=>t.json()).then(t=>{t.error||W(t)}).catch(()=>{})},[F,Q]),me=c.useCallback(()=>{F&&fetch("/api/gateio/positions",{headers:Q()}).then(t=>t.json()).then(t=>{Array.isArray(t)&&Te(t)}).catch(()=>{})},[F,Q]),xe=c.useCallback(()=>{F&&fetch("/api/gateio/orders/open",{headers:Q()}).then(t=>t.json()).then(t=>{Array.isArray(t)&&qe(t)}).catch(()=>{})},[F,Q]),Gt=c.useCallback(()=>{F&&fetch("/api/gateio/orders/finished?limit=30",{headers:Q()}).then(t=>t.json()).then(t=>{Array.isArray(t)&&us(t)}).catch(()=>{})},[F,Q]),Qt=c.useCallback(()=>{F&&fetch("/api/gateio/trades?limit=30",{headers:Q()}).then(t=>t.json()).then(t=>{Array.isArray(t)&&gs(t)}).catch(()=>{})},[F,Q]);c.useEffect(()=>{if(F){ie(),me(),xe();const t=setInterval(()=>{ie(),me(),xe()},5e3);return()=>clearInterval(t)}},[F,ie,me,xe]),c.useEffect(()=>{F&&M==="history"&&Gt(),F&&M==="trades"&&Qt()},[F,M,Gt,Qt]),c.useEffect(()=>{const t=()=>{fetch("/api/futures/tickers").then(y=>y.json()).then(y=>{const k={};y.forEach(N=>{k[N.symbol]={lastPrice:N.lastPrice,priceChangePercent:N.priceChangePercent}}),pe(k)}).catch(()=>{})};t();const m=setInterval(t,1e4);return()=>clearInterval(m)},[]);const at=c.useCallback(async()=>{if(n.isCustom){Z({price:"0.0042",priceChange:"+12.50",high:"0.0048",low:"0.0038",volume:"22.7M",markPrice:"0.0042"});return}try{const t=n.gateContract,[m,y,k]=await Promise.all([fetch(`/api/gateio/tickers?contract=${t}`),fetch(`/api/gateio/orderbook?contract=${t}&limit=20`),fetch(`/api/gateio/market-trades?contract=${t}&limit=30`)]),N=await m.json(),D=await y.json(),R=await k.json();if(Array.isArray(N)&&N.length>0){const A=N[0],X=parseFloat(A.last),_e=parseFloat(A.change_percentage);Z({price:X>100?X.toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1}):X.toFixed(4),priceChange:_e.toFixed(2),high:parseFloat(A.high_24h).toLocaleString("en-US",{minimumFractionDigits:1}),low:parseFloat(A.low_24h).toLocaleString("en-US",{minimumFractionDigits:1}),volume:(()=>{const K=parseFloat(A.quote_volume_24h||A.volume_24h_quote||A.volume_24h_base||"0");if(isNaN(K)||K===0){const Hs=parseFloat(A.volume_24h||A.volume_24h_base||"0"),qs=parseFloat(A.last||"0"),Se=Hs*qs;return isNaN(Se)||Se===0?"0.00M":Se>=1e9?(Se/1e9).toFixed(2)+"B":(Se/1e6).toFixed(2)+"M"}return K>=1e9?(K/1e9).toFixed(2)+"B":(K/1e6).toFixed(2)+"M"})(),markPrice:parseFloat(A.mark_price).toLocaleString("en-US",{minimumFractionDigits:1,maximumFractionDigits:1})})}if(D&&D.asks&&D.bids){const A=X=>{let _e=0;return X.slice(0,15).map(K=>(_e+=K.s,{price:parseFloat(K.p).toFixed(1),qty:K.s.toString(),total:_e.toString()}))};B({asks:A(D.asks).reverse(),bids:A(D.bids)})}Array.isArray(R)&&de(R.map(A=>({price:parseFloat(A.price).toFixed(1),qty:A.size.toString(),time:new Date(A.create_time*1e3).toLocaleTimeString(),isBuy:A.size>0})))}catch{}},[n.symbol,n.isCustom,n.gateContract]);c.useEffect(()=>{at();const t=setInterval(at,3e3);return()=>clearInterval(t)},[at]);const Yt=async t=>{if(!F){o({title:s("trading.connectFirst")||"Connect wallet first",variant:"destructive"});return}if(!Ge){te(!0);return}if(n.isCustom){o({title:"TORD/USDT trading coming soon",variant:"destructive"});return}if(!L||parseFloat(L)<=0){o({title:s("trading.enterAmount")||"Enter amount",variant:"destructive"});return}if(d!=="Market"&&(!E||parseFloat(E)<=0)){o({title:s("trading.enterPrice")||"Enter price",variant:"destructive"});return}if(d==="Stop Limit"&&(!he||parseFloat(he)<=0)){o({title:s("trading.enterTriggerPrice")||"Enter trigger price",variant:"destructive"});return}vt(!0);try{const m=Math.floor(parseFloat(L)),y=t==="long"?m:-m;let k=!1;if(d==="Stop Limit"){const N=P?parseFloat(P.price.replace(/,/g,"")):0,R=parseFloat(he)>=N?1:2,X=await(await fetch("/api/gateio/price-order",{method:"POST",headers:{"Content-Type":"application/json","x-wallet-address":v},body:JSON.stringify({contract:n.gateContract,size:y,price:E,triggerPrice:he,triggerRule:R,reduceOnly:Xe})})).json();X.code==="NO_TRADING_ACCOUNT"?te(!0):X.error?o({title:s("trading.orderFailed")||"Order Failed",description:X.error,variant:"destructive"}):(k=!0,o({title:s("trading.orderSuccess")||"Stop Limit Order Placed",description:`Trigger: ${he} → ${t==="long"?"Buy/Long":"Sell/Short"} ${n.label} x${m} @ ${E}`}),p(""),U(""),Ue(""),ie(),me(),xe())}else{const D=await(await fetch("/api/gateio/order",{method:"POST",headers:{"Content-Type":"application/json","x-wallet-address":v},body:JSON.stringify({contract:n.gateContract,size:y,price:d==="Market"?"0":E,orderType:d==="Market"?"market":"limit",reduceOnly:Xe})})).json();D.code==="NO_TRADING_ACCOUNT"?te(!0):D.error?o({title:s("trading.orderFailed")||"Order Failed",description:D.error,variant:"destructive"}):(k=!0,o({title:s("trading.orderSuccess")||"Order Placed",description:`${t==="long"?"Buy/Long":"Sell/Short"} ${n.label} x${m}`}),p(""),U(""),ie(),me(),xe())}if(k&&Ke&&(Le||Pe)){const N=async(D,R)=>{if(D)try{await fetch("/api/gateio/price-order",{method:"POST",headers:{"Content-Type":"application/json","x-wallet-address":v},body:JSON.stringify({contract:n.gateContract,size:-y,price:"0",triggerPrice:D,triggerRule:R,closePosition:!0,isMarket:!0})})}catch{}};Le&&await N(Le,t==="long"?1:2),Pe&&await N(Pe,t==="long"?2:1),_t(""),Bt("")}}catch(m){o({title:"Error",description:m.message,variant:"destructive"})}vt(!1)},Is=async t=>{jt(t);try{const y=await(await fetch("/api/gateio/close-position",{method:"POST",headers:{"Content-Type":"application/json","x-wallet-address":v},body:JSON.stringify({contract:t})})).json();y.error?o({title:s("trading.closeFailed")||"Close Failed",description:y.error,variant:"destructive"}):(o({title:s("trading.positionClosed")||"Position Closed"}),me(),ie())}catch(m){o({title:"Error",description:m.message,variant:"destructive"})}jt(null)},Os=async t=>{St(t);try{const y=await(await fetch(`/api/gateio/order/${t}`,{method:"DELETE",headers:{"x-wallet-address":v}})).json();y.error?o({title:s("trading.cancelFailed")||"Cancel Failed",description:y.error,variant:"destructive"}):(o({title:s("trading.orderCancelled")||"Order Cancelled"}),xe())}catch(m){o({title:"Error",description:m.message,variant:"destructive"})}St(null)},Rs=async()=>{if(!n.isCustom){Tt(!0);try{const m=await(await fetch("/api/gateio/leverage",{method:"POST",headers:{"Content-Type":"application/json","x-wallet-address":v},body:JSON.stringify({contract:n.gateContract,leverage:h,crossLeverageLimit:f==="Cross"?h:void 0})})).json();m.error?o({title:"Leverage Error",description:m.error,variant:"destructive"}):(o({title:`${f} ${h}x leverage set`}),G(!1))}catch(t){o({title:"Error",description:t.message,variant:"destructive"})}Tt(!1)}},_s=V.bids[0]?.price||P?.price||"---",Re=P&&parseFloat(P.priceChange)>=0,Ne=c.useMemo(()=>{const t=(m,y)=>{if(H<=.01)return m;const k={};for(const D of m){const R=parseFloat(D.price),A=y==="ask"?(Math.ceil(R/H)*H).toFixed(H>=1?0:H>=.1?1:2):(Math.floor(R/H)*H).toFixed(H>=1?0:H>=.1?1:2);k[A]||(k[A]={qty:0,total:0}),k[A].qty+=parseFloat(D.qty),k[A].total+=parseFloat(D.total)}const N=Object.entries(k).map(([D,R])=>({price:D,qty:R.qty.toFixed(H>=10?0:4),total:R.total.toFixed(0)}));return y==="ask"?N.sort((D,R)=>parseFloat(D.price)-parseFloat(R.price)):N.sort((D,R)=>parseFloat(R.price)-parseFloat(D.price)),N};return{asks:t(V.asks,"ask"),bids:t(V.bids,"bid")}},[V,H]),it=c.useMemo(()=>{const t=Ne.bids.reduce((k,N)=>k+parseFloat(N.qty),0),m=Ne.asks.reduce((k,N)=>k+parseFloat(N.qty),0),y=t+m;return y>0?t/y*100:50},[Ne]),Bs=gt.filter(t=>{const m=S===""||t.label.toLowerCase().includes(S.toLowerCase())||t.base.toLowerCase().includes(S.toLowerCase()),y=r==="All"||t.categories.includes(r);return m&&y}),ot=T?parseFloat(T.available).toFixed(2):"0.00",zs=T?parseFloat(T.total).toFixed(2):"0.00",$s=T?parseFloat(T.unrealised_pnl).toFixed(2):"0.00",Xt=T?(parseFloat(T.order_margin)+parseFloat(T.position_margin)).toFixed(2):"0.00";return e.jsxs("div",{className:"min-h-screen md:h-screen w-screen bg-[#0a0a0a] text-white flex flex-col overflow-y-auto md:overflow-hidden","data-testid":"trading-page",children:[e.jsxs("header",{className:"flex items-center justify-between px-2 sm:px-3 py-2 border-b border-white/10 bg-black/60 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx(nt,{href:"/",className:"flex items-center gap-1.5",children:e.jsx("img",{src:"/logo.png",alt:"Tord Labs",className:"h-6 w-6 sm:h-7 sm:w-7"})}),e.jsx(nt,{href:"/",className:"p-1.5 rounded-lg text-muted-foreground hover:text-white hover:bg-white/5 transition-colors",title:s("nav.home")||"Home",children:e.jsx(Ys,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-xs font-bold text-primary border border-primary/30 px-2 py-1 rounded bg-primary/10 flex items-center gap-1",children:[e.jsx(Xs,{className:"h-3 w-3"}),e.jsx("span",{className:"hidden sm:inline",children:s("trading.title")||"Trading"})]}),e.jsx(nt,{href:"/dashboard",className:"p-1.5 rounded-lg text-muted-foreground hover:text-white hover:bg-white/5 transition-colors",title:s("nav.launchApp")||"Dashboard",children:e.jsx(Kt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx(Ks,{}),v?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("span",{className:"text-[10px] text-green-400 items-center gap-1 hidden sm:flex",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 inline-block"})," Live"]}),e.jsxs("span",{className:"text-[10px] sm:text-xs bg-white/5 border border-white/10 px-2 sm:px-3 py-1.5 rounded-lg font-mono",children:[v.slice(0,4),"...",v.slice(-3)]})]}):e.jsxs("button",{"data-testid":"btn-connect-wallet",onClick:tt,className:"flex items-center gap-1 text-[10px] sm:text-xs bg-primary text-black px-2 sm:px-3 py-1.5 rounded-lg font-bold hover:bg-primary/90 transition-colors",children:[e.jsx(Be,{className:"h-3 w-3"})," ",e.jsx("span",{className:"hidden sm:inline",children:s("trading.connectWallet")||"Connect Wallet"}),e.jsx("span",{className:"sm:hidden",children:s("trading.wallet")||"Wallet"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 px-3 py-2 border-b border-white/10 bg-black/40 overflow-x-auto shrink-0",children:[e.jsxs("button",{"data-testid":"btn-pair-selector",onClick:()=>g(!0),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg hover:bg-white/5 transition-colors shrink-0",children:[e.jsx("img",{src:pt(n),alt:n.base,className:"h-5 w-5 rounded-full",onError:t=>{t.target.src="https://cdn.jsdelivr.net/npm/cryptocurrency-icons@latest/svg/color/generic.svg"}}),e.jsx("span",{className:"font-display font-bold text-white text-sm",children:n.label}),e.jsx("span",{className:"text-[10px] text-muted-foreground bg-white/5 px-1.5 py-0.5 rounded",children:s("trading.perp")||"Perp"}),e.jsx(ht,{className:"h-3 w-3 text-muted-foreground"})]}),P&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col shrink-0",children:[e.jsx("span",{className:`text-lg font-display font-bold ${Re?"text-green-400":"text-red-400"}`,children:P.price}),e.jsxs("span",{className:`text-[10px] ${Re?"text-green-400":"text-red-400"}`,children:[Re?"+":"",P.priceChange,"%"]})]}),e.jsxs("div",{className:"hidden lg:flex items-center gap-6 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:s("trading.mark")||"Mark"}),e.jsx("span",{className:"text-white ml-2",children:P.markPrice})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:s("trading.high24h")||"24h High"}),e.jsx("span",{className:"text-white ml-2",children:P.high})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:s("trading.low24h")||"24h Low"}),e.jsx("span",{className:"text-white ml-2",children:P.low})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:s("trading.vol24h")||"24h Vol"}),e.jsxs("span",{className:"text-white ml-2",children:[P.volume," USDT"]})]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-visible md:overflow-hidden",children:[e.jsxs("div",{className:"contents md:flex md:flex-1 md:flex-col md:min-w-0",children:[e.jsx("div",{className:"md:hidden flex items-center justify-between px-3 py-1.5 border-b border-white/10 bg-black/40 order-[0] md:order-none",children:e.jsxs("button",{"data-testid":"btn-toggle-chart",onClick:()=>ws(!Ee),className:"flex items-center gap-1.5 text-xs text-muted-foreground hover:text-white transition-colors",children:[e.jsx(Js,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:Ee?s("trading.showChart")||"Show Chart":s("trading.hideChart")||"Hide Chart"}),Ee?e.jsx(ht,{className:"h-3 w-3"}):e.jsx(es,{className:"h-3 w-3"})]})}),e.jsxs("div",{className:`${Ee?"hidden md:flex":""} relative order-[1] md:order-none flex flex-col`,style:{height:`${zt}px`,zIndex:b?-1:1,visibility:b?"hidden":"visible"},children:[e.jsx("div",{className:"flex-1 min-h-0",ref:Fe}),e.jsx("div",{"data-testid":"chart-resize-handle",className:"h-3 flex items-center justify-center cursor-ns-resize bg-black/60 hover:bg-[#C9A55C]/20 border-t border-b border-white/10 transition-colors group select-none shrink-0",onMouseDown:t=>Ie(t.clientY,"chart"),onTouchStart:t=>Ie(t.touches[0].clientY,"chart"),children:e.jsx("div",{className:"w-8 h-0.5 rounded-full bg-white/20 group-hover:bg-[#C9A55C]/60 transition-colors"})})]}),e.jsxs("div",{className:"border-t border-white/10 bg-black/30 order-[3] md:order-none",children:[e.jsx("div",{className:"flex items-center gap-1 px-3 py-1 border-b border-white/10 overflow-x-auto",children:[{id:"positions",label:`${s("trading.positions")||"Positions"} (${ee.length})`},{id:"orders",label:`${s("trading.openOrders")||"Open Orders"} (${fe.length})`},{id:"history",label:s("trading.orderHistory")||"Order History"},{id:"trades",label:s("trading.tradeHistory")||"Trade History"}].map(t=>e.jsx("button",{"data-testid":`tab-${t.id}`,onClick:()=>J(t.id),className:`px-3 py-2 text-xs font-medium whitespace-nowrap transition-colors ${M===t.id?"text-white border-b-2 border-primary":"text-muted-foreground hover:text-white"}`,children:t.label},t.id))}),e.jsxs("div",{className:"h-32 md:h-36 overflow-y-auto",children:[M==="positions"&&(ee.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground text-xs",children:F?s("trading.noPositions")||"No open positions":s("trading.connectFirst")||"Connect wallet to view positions"}):e.jsxs("table",{className:"w-full text-[11px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-muted-foreground border-b border-white/5",children:[e.jsx("th",{className:"text-left px-3 py-1.5 font-normal",children:s("trading.pairColumn")||"Pair"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Size"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Entry"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Mark"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"PnL"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Liq."}),e.jsx("th",{className:"text-right px-3 py-1.5 font-normal"})]})}),e.jsx("tbody",{children:ee.map(t=>{const m=parseFloat(t.unrealised_pnl);return e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[e.jsxs("td",{className:"px-3 py-2 font-medium",children:[t.contract," ",e.jsxs("span",{className:`text-[10px] ${t.size>0?"text-green-400":"text-red-400"}`,children:[t.size>0?"Long":"Short"," ",t.leverage,"x"]})]}),e.jsx("td",{className:"text-right px-2 py-2",children:Math.abs(t.size)}),e.jsx("td",{className:"text-right px-2 py-2",children:parseFloat(t.entry_price).toFixed(2)}),e.jsx("td",{className:"text-right px-2 py-2",children:parseFloat(t.mark_price).toFixed(2)}),e.jsxs("td",{className:`text-right px-2 py-2 font-medium ${m>=0?"text-green-400":"text-red-400"}`,children:[m>=0?"+":"",m.toFixed(2)]}),e.jsx("td",{className:"text-right px-2 py-2 text-yellow-400",children:parseFloat(t.liq_price).toFixed(2)}),e.jsx("td",{className:"text-right px-3 py-2",children:e.jsx("button",{onClick:()=>Is(t.contract),disabled:yt===t.contract,className:"px-2 py-1 text-[10px] bg-red-500/20 text-red-400 rounded hover:bg-red-500/30 disabled:opacity-50 transition-colors",children:yt===t.contract?e.jsx(se,{className:"h-3 w-3 animate-spin"}):s("trading.closePos")||"Close"})})]},t.contract)})})]})),M==="orders"&&(fe.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground text-xs",children:F?s("trading.noOrders")||"No open orders":s("trading.connectFirst")||"Connect wallet"}):e.jsxs("table",{className:"w-full text-[11px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-muted-foreground border-b border-white/5",children:[e.jsx("th",{className:"text-left px-3 py-1.5 font-normal",children:s("trading.pairColumn")||"Pair"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Side"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Price"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Size"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Filled"}),e.jsx("th",{className:"text-right px-3 py-1.5 font-normal"})]})}),e.jsx("tbody",{children:fe.map(t=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[e.jsx("td",{className:"px-3 py-2 font-medium",children:t.contract}),e.jsx("td",{className:`text-right px-2 py-2 ${t.size>0?"text-green-400":"text-red-400"}`,children:t.size>0?"Long":"Short"}),e.jsx("td",{className:"text-right px-2 py-2",children:t.price}),e.jsx("td",{className:"text-right px-2 py-2",children:Math.abs(t.size)}),e.jsxs("td",{className:"text-right px-2 py-2",children:[Math.abs(t.size)-Math.abs(t.left),"/",Math.abs(t.size)]}),e.jsx("td",{className:"text-right px-3 py-2",children:e.jsx("button",{onClick:()=>Os(t.id),disabled:Nt===t.id,className:"px-2 py-1 text-[10px] bg-red-500/20 text-red-400 rounded hover:bg-red-500/30 disabled:opacity-50 transition-colors",children:Nt===t.id?e.jsx(se,{className:"h-3 w-3 animate-spin"}):s("trading.cancel")||"Cancel"})})]},t.id))})]})),M==="history"&&(bt.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground text-xs",children:F?s("trading.noOrderHistory")||"No order history":s("trading.connectFirst")||"Connect wallet"}):e.jsxs("table",{className:"w-full text-[11px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-muted-foreground border-b border-white/5",children:[e.jsx("th",{className:"text-left px-3 py-1.5 font-normal",children:"Time"}),e.jsx("th",{className:"text-left px-2 py-1.5 font-normal",children:s("trading.pairColumn")||"Pair"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Side"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Price"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Size"}),e.jsx("th",{className:"text-right px-3 py-1.5 font-normal",children:"Status"})]})}),e.jsx("tbody",{children:bt.map(t=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[e.jsx("td",{className:"px-3 py-2 text-muted-foreground",children:new Date(t.create_time*1e3).toLocaleString()}),e.jsx("td",{className:"px-2 py-2 font-medium",children:t.contract}),e.jsx("td",{className:`text-right px-2 py-2 ${t.size>0?"text-green-400":"text-red-400"}`,children:t.size>0?"Long":"Short"}),e.jsx("td",{className:"text-right px-2 py-2",children:t.fill_price||t.price}),e.jsx("td",{className:"text-right px-2 py-2",children:Math.abs(t.size)}),e.jsx("td",{className:"text-right px-3 py-2 text-muted-foreground",children:t.status})]},t.id))})]})),M==="trades"&&(wt.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground text-xs",children:F?s("trading.noTradeHistory")||"No trade history":s("trading.connectFirst")||"Connect wallet"}):e.jsxs("table",{className:"w-full text-[11px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-muted-foreground border-b border-white/5",children:[e.jsx("th",{className:"text-left px-3 py-1.5 font-normal",children:"Time"}),e.jsx("th",{className:"text-left px-2 py-1.5 font-normal",children:s("trading.pairColumn")||"Pair"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Side"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Price"}),e.jsx("th",{className:"text-right px-2 py-1.5 font-normal",children:"Size"}),e.jsx("th",{className:"text-right px-3 py-1.5 font-normal",children:"Fee"})]})}),e.jsx("tbody",{children:wt.map((t,m)=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[e.jsx("td",{className:"px-3 py-2 text-muted-foreground",children:new Date(t.create_time*1e3).toLocaleString()}),e.jsx("td",{className:"px-2 py-2 font-medium",children:t.contract}),e.jsx("td",{className:`text-right px-2 py-2 ${t.size>0?"text-green-400":"text-red-400"}`,children:t.size>0?"Long":"Short"}),e.jsx("td",{className:"text-right px-2 py-2",children:t.price}),e.jsx("td",{className:"text-right px-2 py-2",children:Math.abs(t.size)}),e.jsx("td",{className:"text-right px-3 py-2 text-muted-foreground",children:t.fee})]},t.id||m))})]}))]})]})]}),e.jsxs("div",{className:"flex flex-row md:flex-col w-full md:w-auto order-2 md:order-none shrink-0",children:[e.jsxs("div",{className:"w-1/2 md:w-56 xl:w-64 md:border-l border-white/10 flex flex-col overflow-hidden border-t md:border-t-0 border-white/10 max-h-[400px] md:max-h-none order-1 md:order-2",children:[e.jsxs("div",{className:"flex border-b border-white/10",children:[e.jsx("button",{onClick:()=>z("book"),className:`flex-1 py-2 text-xs font-medium text-center transition-colors ${$==="book"?"text-white border-b-2 border-primary":"text-muted-foreground"}`,children:s("trading.orderBook")||"Order Book"}),e.jsx("button",{onClick:()=>z("trades"),className:`flex-1 py-2 text-xs font-medium text-center transition-colors ${$==="trades"?"text-white border-b-2 border-primary":"text-muted-foreground"}`,children:s("trading.recentTrades")||"Trades"})]}),$==="book"?e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col text-[11px] font-mono",children:[e.jsxs("div",{className:"flex items-center justify-between px-2 py-1 text-muted-foreground border-b border-white/5",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx("span",{children:s("trading.priceLabel")||"Price(USDT)"}),e.jsxs("span",{children:[s("trading.sizeLabel")||"Size","(",n.base,")"]}),e.jsx("span",{children:s("trading.totalLabel")||"Total"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{"data-testid":"btn-orderbook-grouping",onClick:()=>Rt(!Ot),className:"text-[10px] px-1.5 py-0.5 rounded bg-white/5 hover:bg-white/10 text-muted-foreground hover:text-white transition-colors",children:H}),Ot&&e.jsx("div",{className:"absolute right-0 top-full mt-1 bg-[#1a1a1a] border border-white/10 rounded-lg shadow-xl overflow-hidden",style:{zIndex:50},children:[.1,.5,1,10,100].map(t=>e.jsx("button",{"data-testid":`btn-grouping-${t}`,onClick:()=>{ks(t),Rt(!1)},className:`block w-full text-left px-3 py-1.5 text-[11px] hover:bg-white/10 transition-colors ${H===t?"text-primary font-bold":"text-white"}`,children:t},t))})]})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"flex-1 overflow-hidden flex flex-col justify-end",children:Ne.asks.map((t,m)=>e.jsxs("div",{className:"flex justify-between px-2 py-[2px] relative hover:bg-white/5 cursor-pointer",onClick:()=>{U(t.price),x("Limit")},children:[e.jsx("div",{className:"absolute right-0 top-0 bottom-0 bg-red-500/10",style:{width:`${Math.min(100,parseFloat(t.qty)/2*100)}%`}}),e.jsx("span",{className:"text-red-400 relative z-10",children:t.price}),e.jsx("span",{className:"text-muted-foreground relative z-10",children:t.qty}),e.jsx("span",{className:"text-muted-foreground relative z-10",children:t.total})]},`a${m}`))}),e.jsx("div",{className:"flex items-center justify-center py-2 border-y border-white/10",children:e.jsx("span",{className:`text-base font-bold ${Re?"text-green-400":"text-red-400"}`,children:_s})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:Ne.bids.map((t,m)=>e.jsxs("div",{className:"flex justify-between px-2 py-[2px] relative hover:bg-white/5 cursor-pointer",onClick:()=>{U(t.price),x("Limit")},children:[e.jsx("div",{className:"absolute right-0 top-0 bottom-0 bg-green-500/10",style:{width:`${Math.min(100,parseFloat(t.qty)/2*100)}%`}}),e.jsx("span",{className:"text-green-400 relative z-10",children:t.price}),e.jsx("span",{className:"text-muted-foreground relative z-10",children:t.qty}),e.jsx("span",{className:"text-muted-foreground relative z-10",children:t.total})]},`b${m}`))})]}),e.jsx("div",{className:"px-2 py-1.5 border-t border-white/5",children:e.jsxs("div",{className:"flex items-center gap-1 text-[10px]",children:[e.jsxs("span",{className:"text-green-400 font-medium",children:["B ",it.toFixed(2),"%"]}),e.jsx("div",{className:"flex-1 h-1.5 rounded-full overflow-hidden bg-red-500/40",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all duration-300",style:{width:`${it}%`}})}),e.jsxs("span",{className:"text-red-400 font-medium",children:[(100-it).toFixed(2),"% S"]})]})})]}):e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col text-[11px] font-mono",children:[e.jsxs("div",{className:"flex justify-between px-2 py-1 text-muted-foreground border-b border-white/5",children:[e.jsx("span",{children:s("trading.priceLabel")||"Price(USDT)"}),e.jsxs("span",{children:[s("trading.sizeLabel")||"Size","(",n.base,")"]}),e.jsx("span",{children:s("trading.timeLabel")||"Time"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:ce.map((t,m)=>e.jsxs("div",{className:"flex justify-between px-2 py-[2px] hover:bg-white/5",children:[e.jsx("span",{className:t.isBuy?"text-green-400":"text-red-400",children:t.price}),e.jsx("span",{className:"text-muted-foreground",children:t.qty}),e.jsx("span",{className:"text-muted-foreground",children:t.time})]},m))})]})]}),e.jsxs("div",{className:"w-1/2 md:w-64 xl:w-72 border-l border-white/10 flex flex-col bg-black/20 border-t md:border-t-0 border-white/10 order-2 md:order-1 md:border-l tradeform-resizable",style:{"--tradeform-h":`${$t}px`},children:[e.jsxs("div",{className:"p-3 border-b border-white/10 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("button",{onClick:()=>_("Cross"),className:`flex-1 py-1.5 text-xs font-medium rounded-lg transition-colors ${f==="Cross"?"bg-white/10 text-white":"text-muted-foreground hover:text-white"}`,children:s("trading.cross")||"Cross"}),e.jsx("button",{onClick:()=>_("Isolated"),className:`flex-1 py-1.5 text-xs font-medium rounded-lg transition-colors ${f==="Isolated"?"bg-white/10 text-white":"text-muted-foreground hover:text-white"}`,children:s("trading.isolated")||"Isolated"}),e.jsxs("button",{"data-testid":"btn-leverage",onClick:()=>G(!re),className:"px-3 py-1.5 text-xs font-bold text-primary bg-primary/10 rounded-lg hover:bg-primary/20 transition-colors",children:[h,"x"]})]}),re&&e.jsxs("div",{className:"mb-3 p-3 rounded-xl border border-white/10 bg-black/60",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:s("trading.leverage")||"Leverage"}),e.jsxs("span",{className:"text-sm font-bold text-primary",children:[h,"x"]})]}),e.jsx("input",{type:"range",min:"1",max:n.maxLev,value:h,onChange:t=>w(parseInt(t.target.value)),className:"w-full accent-primary"}),e.jsx("div",{className:"flex justify-between mt-1",children:[1,5,10,25,50,100].filter(t=>t<=n.maxLev).map(t=>e.jsxs("button",{onClick:()=>w(t),className:"text-[10px] text-muted-foreground hover:text-primary transition-colors",children:[t,"x"]},t))}),e.jsx("button",{onClick:Rs,disabled:Ct||n.isCustom,className:"w-full mt-2 py-1.5 text-xs font-bold bg-primary text-black rounded-lg hover:bg-primary/90 disabled:opacity-50 transition-colors",children:Ct?e.jsx(se,{className:"h-3 w-3 animate-spin mx-auto"}):s("trading.confirmLeverage")||"Confirm Leverage"})]}),e.jsx("div",{className:"flex mb-3",children:["Market","Limit","Stop Limit"].map(t=>e.jsx("button",{"data-testid":`btn-order-${t.toLowerCase().replace(" ","-")}`,onClick:()=>x(t),className:`flex-1 py-1.5 text-xs font-medium transition-colors ${d===t?"text-white border-b-2 border-primary":"text-muted-foreground hover:text-white"}`,children:t},t))}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-muted-foreground",children:s("trading.avbl")||"Avbl"}),e.jsxs("span",{className:"text-[10px] text-white ml-1",children:[ot," USDT"]})]}),d==="Stop Limit"&&e.jsxs("div",{className:"flex items-center bg-white/5 border border-yellow-500/30 rounded-lg",children:[e.jsx("button",{onClick:()=>Ue(t=>(parseFloat(t||"0")-1).toString()),className:"p-2 text-muted-foreground hover:text-white",children:e.jsx(ct,{className:"h-3 w-3"})}),e.jsx("input",{"data-testid":"input-trigger-price",type:"text",value:he,onChange:t=>Ue(t.target.value),placeholder:s("trading.triggerPrice")||"Trigger Price",className:"flex-1 bg-transparent text-center text-xs text-white placeholder:text-muted-foreground focus:outline-none"}),e.jsx("button",{onClick:()=>Ue(t=>(parseFloat(t||"0")+1).toString()),className:"p-2 text-muted-foreground hover:text-white",children:e.jsx(dt,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-[10px] text-yellow-400 pr-2",children:"Trigger"})]}),d!=="Market"&&e.jsxs("div",{className:"flex items-center bg-white/5 border border-white/10 rounded-lg",children:[e.jsx("button",{onClick:()=>U(t=>(parseFloat(t||"0")-1).toString()),className:"p-2 text-muted-foreground hover:text-white",children:e.jsx(ct,{className:"h-3 w-3"})}),e.jsx("input",{"data-testid":"input-limit-price",type:"text",value:E,onChange:t=>U(t.target.value),placeholder:P?.price||"Price",className:"flex-1 bg-transparent text-center text-xs text-white placeholder:text-muted-foreground focus:outline-none"}),e.jsx("button",{onClick:()=>U(t=>(parseFloat(t||"0")+1).toString()),className:"p-2 text-muted-foreground hover:text-white",children:e.jsx(dt,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-[10px] text-muted-foreground pr-2",children:"USDT"})]}),e.jsxs("div",{className:"flex items-center bg-white/5 border border-white/10 rounded-lg",children:[e.jsx("button",{onClick:()=>p(t=>Math.max(0,parseInt(t||"0")-1).toString()),className:"p-2 text-muted-foreground hover:text-white",children:e.jsx(ct,{className:"h-3 w-3"})}),e.jsx("input",{"data-testid":"input-amount",type:"text",value:L,onChange:t=>p(t.target.value),placeholder:s("trading.amount")||"Amount (contracts)",className:"flex-1 bg-transparent text-center text-xs text-white placeholder:text-muted-foreground focus:outline-none"}),e.jsx("button",{onClick:()=>p(t=>(parseInt(t||"0")+1).toString()),className:"p-2 text-muted-foreground hover:text-white",children:e.jsx(dt,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-[10px] text-muted-foreground pr-2",children:s("trading.contracts")||"Cont"})]}),e.jsx("div",{className:"flex gap-1",children:[25,50,75,100].map(t=>e.jsxs("button",{onClick:()=>{if(T){const m=parseFloat(T.available),y=P?parseFloat(P.price.replace(/,/g,"")):0;if(y>0){const k=Math.floor(m*h*(t/100)/y);p(Math.max(1,k).toString())}}},className:"flex-1 text-[10px] py-1 rounded bg-white/5 text-muted-foreground hover:text-white hover:bg-white/10 transition-colors",children:[t,"%"]},t))}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px]",children:[e.jsxs("label",{className:"flex items-center gap-1 text-muted-foreground cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Ke,onChange:t=>Ds(t.target.checked),className:"accent-primary w-3 h-3","data-testid":"checkbox-tpsl"})," TP/SL"]}),e.jsxs("label",{className:"flex items-center gap-1 text-muted-foreground cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Xe,onChange:t=>Ts(t.target.checked),className:"accent-primary w-3 h-3","data-testid":"checkbox-reduce-only"})," ",s("trading.reduceOnly")||"Reduce-Only"]})]}),Ke&&e.jsxs("div",{className:"space-y-1.5 p-2 rounded-lg border border-white/10 bg-white/5",children:[e.jsxs("div",{className:"flex items-center bg-white/5 border border-green-500/20 rounded-lg",children:[e.jsx("input",{"data-testid":"input-tp-price",type:"text",value:Le,onChange:t=>_t(t.target.value),placeholder:s("trading.takeProfit")||"Take Profit Price",className:"flex-1 bg-transparent text-center text-xs text-white placeholder:text-muted-foreground focus:outline-none py-1.5 px-2"}),e.jsx("span",{className:"text-[10px] text-green-400 pr-2",children:"TP"})]}),e.jsxs("div",{className:"flex items-center bg-white/5 border border-red-500/20 rounded-lg",children:[e.jsx("input",{"data-testid":"input-sl-price",type:"text",value:Pe,onChange:t=>Bt(t.target.value),placeholder:s("trading.stopLoss")||"Stop Loss Price",className:"flex-1 bg-transparent text-center text-xs text-white placeholder:text-muted-foreground focus:outline-none py-1.5 px-2"}),e.jsx("span",{className:"text-[10px] text-red-400 pr-2",children:"SL"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-1",children:[e.jsxs("button",{"data-testid":"btn-buy-long",onClick:()=>Yt("long"),disabled:ke,className:"py-2.5 rounded-lg bg-green-500 hover:bg-green-600 text-white text-xs font-bold transition-colors disabled:opacity-50 flex items-center justify-center gap-1",children:[ke?e.jsx(se,{className:"h-3 w-3 animate-spin"}):null,s("trading.buyLong")||"Buy / Long"]}),e.jsxs("button",{"data-testid":"btn-sell-short",onClick:()=>Yt("short"),disabled:ke,className:"py-2.5 rounded-lg bg-red-500 hover:bg-red-600 text-white text-xs font-bold transition-colors disabled:opacity-50 flex items-center justify-center gap-1",children:[ke?e.jsx(se,{className:"h-3 w-3 animate-spin"}):null,s("trading.sellShort")||"Sell / Short"]})]}),e.jsxs("div",{className:"space-y-1 pt-2",children:[e.jsxs("div",{className:"flex justify-between text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:s("trading.margin")||"Margin"}),e.jsxs("span",{className:"text-white",children:[Xt," USDT"]})]}),e.jsxs("div",{className:"flex justify-between text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:s("trading.max")||"Max"}),e.jsxs("span",{className:"text-white",children:[ot," USDT"]})]}),e.jsxs("div",{className:"flex justify-between text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:s("trading.fee")||"Fee"}),e.jsx("span",{className:"text-white",children:ps})]})]})]})]}),e.jsx("div",{"data-testid":"tradeform-resize-handle",className:"hidden md:flex h-2 items-center justify-center cursor-ns-resize hover:bg-[#C9A55C]/10 border-b border-white/5 transition-colors group select-none shrink-0",onMouseDown:t=>Ie(t.clientY,"tradeform"),onTouchStart:t=>Ie(t.touches[0].clientY,"tradeform"),children:e.jsx("div",{className:"w-6 h-[1px] rounded-full bg-white/10 group-hover:bg-[#C9A55C]/40 transition-colors"})})]})]})]}),bs&&F&&Ce.createPortal(e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center px-4",style:{zIndex:2147483647},onClick:()=>be(!1),children:[e.jsx("div",{className:"fixed inset-0 bg-black/80",style:{zIndex:2147483646}}),e.jsxs("div",{className:"relative w-full max-w-md bg-[#111] border border-white/10 rounded-2xl shadow-2xl overflow-hidden",style:{zIndex:2147483647},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsxs("h3",{className:"font-display font-bold text-white flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5 text-primary"}),s("trading.fundingPanel")||"Funding"]}),e.jsx("button",{onClick:()=>be(!1),className:"text-muted-foreground hover:text-white",children:e.jsx(ue,{className:"h-5 w-5"})})]}),Y&&e.jsx("div",{className:"px-4 py-3 border-b border-white/10 bg-primary/5",children:e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-muted-foreground",children:s("trading.platformBalance")||"Balance"}),e.jsx("div",{className:"text-sm font-bold text-primary",children:parseFloat(Y.balance).toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-muted-foreground",children:s("trading.totalDeposited")||"Deposited"}),e.jsx("div",{className:"text-sm font-bold text-green-400",children:parseFloat(Y.totalDeposited).toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-muted-foreground",children:s("trading.totalWithdrawn")||"Withdrawn"}),e.jsx("div",{className:"text-sm font-bold text-red-400",children:parseFloat(Y.totalWithdrawn).toFixed(2)})]})]})}),e.jsx("div",{className:"flex border-b border-white/10",children:[{id:"deposit",label:s("trading.deposit")||"Deposit",icon:ze},{id:"withdraw",label:s("trading.withdraw")||"Withdraw",icon:$e},{id:"history",label:s("trading.depositHistory")||"History",icon:mt}].map(t=>e.jsxs("button",{"data-testid":`funding-tab-${t.id}`,onClick:()=>Ae(t.id),className:`flex-1 py-2.5 text-xs font-medium flex items-center justify-center gap-1.5 transition-colors ${De===t.id?"text-white border-b-2 border-primary":"text-muted-foreground hover:text-white"}`,children:[e.jsx(t.icon,{className:"h-3.5 w-3.5"})," ",t.label]},t.id))}),e.jsxs("div",{className:"p-4 max-h-[400px] overflow-y-auto",children:[De==="deposit"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-yellow-500/10 border border-yellow-500/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Zs,{className:"h-4 w-4 text-yellow-400 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-[10px] text-yellow-400",children:s("trading.depositWarning")||"Only send USDT on BSC (BEP20) network."})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:s("trading.depositAddress")||"Deposit Address"}),e.jsxs("div",{className:"flex flex-col items-center gap-3 p-4 rounded-xl bg-white/5 border border-white/10",children:[e.jsx("div",{className:"p-3 bg-white rounded-xl",children:e.jsx(xs,{value:Ve?.address||"0x6F8c1312792f52256Cdd6B0A04e337Df4ad93507",size:160,level:"H",includeMargin:!1})}),e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[e.jsx("div",{className:"flex-1 text-xs font-mono text-white break-all text-center",children:Ve?.address||"0x6F8c1312792f52256Cdd6B0A04e337Df4ad93507"}),e.jsx("button",{"data-testid":"btn-copy-address",onClick:()=>Fs(Ve?.address||"0x6F8c1312792f52256Cdd6B0A04e337Df4ad93507"),className:"p-2 rounded-lg bg-primary/20 text-primary hover:bg-primary/30 transition-colors shrink-0",children:e.jsx(er,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:s("trading.depositNetwork")||"Network: BEP20 (BSC)"}),e.jsx("span",{className:"text-primary font-bold",children:s("trading.depositCoin")||"USDT Only"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs text-muted-foreground mb-1 block",children:[s("trading.withdrawAmount")||"Amount"," (USDT)"]}),e.jsx("input",{"data-testid":"input-deposit-amount",type:"text",value:we,onChange:t=>Dt(t.target.value),placeholder:"0.00",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white placeholder:text-muted-foreground focus:outline-none focus:border-primary/50"}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:s("trading.minDeposit")||"Minimum deposit: 1 USDT"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:s("trading.txHash")||"Transaction Hash"}),e.jsx("input",{"data-testid":"input-deposit-txhash",type:"text",value:Me,onChange:t=>kt(t.target.value),placeholder:s("trading.txHashPlaceholder")||"Enter your tx hash after sending",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white placeholder:text-muted-foreground focus:outline-none focus:border-primary/50"})]}),e.jsxs("button",{"data-testid":"btn-submit-deposit",onClick:Ls,disabled:At||!we||!Me||parseFloat(we)<1,className:"w-full py-3 rounded-xl bg-green-500 hover:bg-green-600 text-white text-sm font-bold transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[At?e.jsx(se,{className:"h-4 w-4 animate-spin"}):e.jsx(ze,{className:"h-4 w-4"}),s("trading.submitDeposit")||"Submit Deposit"]})]}),De==="withdraw"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10",children:e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:s("trading.platformBalance")||"Available"}),e.jsxs("span",{className:"text-primary font-bold",children:[Y?parseFloat(Y.balance).toFixed(2):"0.00"," USDT"]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs text-muted-foreground mb-1 block",children:[s("trading.withdrawAmount")||"Amount"," (USDT)"]}),e.jsx("input",{"data-testid":"input-withdraw-amount",type:"text",value:ve,onChange:t=>We(t.target.value),placeholder:"0.00",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white placeholder:text-muted-foreground focus:outline-none focus:border-primary/50"}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("p",{className:"text-[10px] text-muted-foreground",children:s("trading.minWithdraw")||"Minimum withdrawal: 1 USDT"}),Y&&e.jsx("button",{onClick:()=>We(Y.balance),className:"text-[10px] text-primary hover:text-primary/80 font-bold",children:"MAX"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:s("trading.withdrawTo")||"Withdraw To"}),e.jsx("div",{className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-2.5 text-sm text-white/70 font-mono","data-testid":"text-withdraw-address",children:v?`${v.slice(0,10)}...${v.slice(-8)}`:"---"}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:s("trading.withdrawOwnWallet")||"Withdrawals go to your connected wallet only"})]}),e.jsxs("button",{"data-testid":"btn-submit-withdraw",onClick:Ps,disabled:Mt||!ve||parseFloat(ve)<1,className:"w-full py-3 rounded-xl bg-red-500 hover:bg-red-600 text-white text-sm font-bold transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[Mt?e.jsx(se,{className:"h-4 w-4 animate-spin"}):e.jsx($e,{className:"h-4 w-4"}),s("trading.submitWithdraw")||"Submit Withdrawal"]})]}),De==="history"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-white mb-2 flex items-center gap-1.5",children:[e.jsx(ze,{className:"h-3.5 w-3.5 text-green-400"})," ",s("trading.depositHistory")||"Deposit History"]}),Pt.length===0?e.jsx("p",{className:"text-xs text-muted-foreground py-3 text-center",children:s("trading.noDeposits")||"No deposits yet"}):e.jsx("div",{className:"space-y-1.5",children:Pt.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white/5 text-[11px]",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-white font-medium",children:[parseFloat(t.amount).toFixed(2)," USDT"]}),e.jsx("div",{className:"text-[10px] text-muted-foreground",children:new Date(t.createdAt).toLocaleString()})]}),e.jsx("span",{className:`${Wt(t.status)} font-medium`,children:Vt(t.status)})]},t.id))})]}),e.jsx("div",{className:"h-px bg-white/10"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-bold text-white mb-2 flex items-center gap-1.5",children:[e.jsx($e,{className:"h-3.5 w-3.5 text-red-400"})," ",s("trading.withdrawHistory")||"Withdrawal History"]}),Ut.length===0?e.jsx("p",{className:"text-xs text-muted-foreground py-3 text-center",children:s("trading.noWithdrawals")||"No withdrawals yet"}):e.jsx("div",{className:"space-y-1.5",children:Ut.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-white/5 text-[11px]",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-white font-medium",children:[parseFloat(t.amount).toFixed(2)," USDT"]}),e.jsx("div",{className:"text-[10px] text-muted-foreground",children:new Date(t.createdAt).toLocaleString()}),e.jsxs("div",{className:"text-[10px] text-muted-foreground font-mono",children:[t.toAddress?.slice(0,10),"...",t.toAddress?.slice(-6)]})]}),e.jsx("span",{className:`${Wt(t.status)} font-medium`,children:Vt(t.status)})]},t.id))})]})]})]})]})]}),document.body),b&&Ce.createPortal(e.jsxs("div",{className:"fixed inset-0 flex items-start justify-center pt-16 px-4",style:{zIndex:2147483647},onClick:()=>g(!1),children:[e.jsx("div",{className:"fixed inset-0 bg-black/80",style:{zIndex:2147483646}}),e.jsxs("div",{className:"relative w-full max-w-lg bg-[#111] border border-white/10 rounded-2xl shadow-2xl overflow-hidden",style:{zIndex:2147483647},onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-display font-bold text-white",children:s("trading.selectPair")||"Select Trading Pair"}),e.jsx("button",{onClick:()=>g(!1),className:"text-muted-foreground hover:text-white",children:e.jsx(ue,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(rr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{"data-testid":"input-search-pair",type:"text",value:S,onChange:t=>j(t.target.value),placeholder:s("trading.searchPlaceholder")||"Search",autoFocus:!0,className:"w-full bg-white/5 border border-white/10 rounded-xl pl-10 pr-4 py-2.5 text-sm text-white placeholder:text-muted-foreground focus:outline-none focus:border-primary/50"}),S&&e.jsx("button",{onClick:()=>j(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-white",children:e.jsx(ue,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex items-center gap-1 px-4 py-2 border-b border-white/10 overflow-x-auto",children:Sr.map(t=>e.jsx("button",{"data-testid":`cat-${t.toLowerCase()}`,onClick:()=>i(t),className:`px-3 py-1.5 text-xs font-medium rounded-lg whitespace-nowrap transition-colors ${r===t?"bg-primary/20 text-primary border border-primary/30":"text-muted-foreground hover:text-white hover:bg-white/5"}`,children:t},t))}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 text-[11px] text-muted-foreground border-b border-white/5",children:[e.jsx("span",{className:"w-1/3",children:s("trading.pairColumn")||"Pair"}),e.jsx("span",{className:"w-1/4 text-right",children:s("trading.priceColumn")||"Price"}),e.jsx("span",{className:"w-1/5 text-right",children:s("trading.changeColumn")||"24h"}),e.jsx("span",{className:"w-1/6 text-right",children:s("trading.levColumn")||"Lev"})]}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:Bs.map(t=>{const m=ae[t.symbol],y=m?parseFloat(m.priceChangePercent):null,k=m?parseFloat(m.lastPrice):null;return e.jsxs("button",{"data-testid":`pair-row-${t.symbol}`,onClick:()=>{u(t),g(!1),j("")},className:`w-full flex items-center justify-between px-4 py-3 hover:bg-white/5 transition-colors ${n.symbol===t.symbol?"bg-primary/5 border-l-2 border-primary":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3 w-1/3",children:[e.jsx("button",{onClick:N=>{N.stopPropagation(),Ms(t.symbol)},className:`${a.includes(t.symbol)?"text-yellow-400":"text-muted-foreground/30"} hover:text-yellow-400 transition-colors`,children:e.jsx(Kt,{className:"h-3.5 w-3.5",fill:a.includes(t.symbol)?"currentColor":"none"})}),e.jsx("img",{src:pt(t),alt:t.base,className:"h-6 w-6 rounded-full",onError:N=>{N.target.src="https://cdn.jsdelivr.net/npm/cryptocurrency-icons@latest/svg/color/generic.svg"}}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold text-white text-sm",children:t.label}),e.jsx("div",{className:"text-[10px] text-muted-foreground",children:t.vol24h})]})]}),e.jsx("span",{className:"text-white text-sm font-mono w-1/4 text-right",children:k?k>100?k.toLocaleString("en-US",{maximumFractionDigits:1}):k.toFixed(4):t.isCustom?"0.0042":"---"}),e.jsx("span",{className:`text-sm w-1/5 text-right font-medium ${y!==null?y>=0?"text-green-400":"text-red-400":t.isCustom?"text-green-400":"text-muted-foreground"}`,children:y!==null?`${y>=0?"+":""}${y}%`:t.isCustom?"+12.5%":"---"}),e.jsxs("span",{className:"text-primary text-sm font-bold w-1/6 text-right",children:[t.maxLev,"x"]})]},t.symbol)})})]})]}),document.body),e.jsx("div",{className:"hidden md:flex border-t border-white/10 bg-black/40 px-4 py-1.5 items-center gap-4 overflow-x-auto shrink-0",children:e.jsx(Tr,{allTickers:ae})}),e.jsx(jr,{isConnected:F,walletAddress:v,platformBalance:Y?.balance,totalValue:zs,unrealizedPnl:$s,availableBalance:ot,marginUsed:Xt,onCreateAccount:()=>{if(!F){tt();return}Ge||te(!0)},onDeposit:()=>{be(!0),Ae("deposit")},onWithdraw:()=>{be(!0),Ae("withdraw")},onTradeHistory:()=>J("trades"),onDepositWithdrawHistory:()=>{be(!0),Ae("history")},onLogout:()=>{q(""),Qe(!1),o({title:s("tradingAssistive.loggedOut")||"Logged out",description:s("tradingAssistive.loggedOutDesc")||"Disconnected from trading account"})}}),Ss&&Ce.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4","data-testid":"create-account-modal",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>te(!1)}),e.jsxs("div",{className:"relative bg-[#111] border border-white/10 rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[e.jsx("button",{onClick:()=>te(!1),className:"absolute top-4 right-4 text-white/40 hover:text-white",children:e.jsx(ue,{className:"h-5 w-5"})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-br from-yellow-500/20 to-amber-500/20 flex items-center justify-center",children:e.jsx(Be,{className:"h-8 w-8 text-yellow-500"})}),e.jsx("h3",{className:"text-xl font-bold text-white","data-testid":"text-create-account-title",children:s("trading.createAccountTitle")||"Create Trading Account"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:s("trading.createAccountDesc")||"Create your isolated trading account to start futures trading. Each wallet gets its own dedicated trading account."})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 mb-4 rounded-xl bg-amber-500/10 border border-amber-500/30",children:[e.jsx(Jt,{className:"h-4 w-4 text-amber-400 shrink-0"}),e.jsx("span",{className:"text-xs text-amber-300 font-medium",children:s("trading.tordRequirement")||"Minimum 1,000,000 $TORD required to create account"})]}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",children:[e.jsx(lt,{className:"h-4 w-4 text-green-400 shrink-0"}),e.jsx("span",{className:"text-sm text-white/80",children:s("trading.createAccountBenefit1")||"Isolated account for your wallet"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",children:[e.jsx(lt,{className:"h-4 w-4 text-green-400 shrink-0"}),e.jsx("span",{className:"text-sm text-white/80",children:s("trading.createAccountBenefit2")||"Trade 32+ futures pairs with leverage"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-xl",children:[e.jsx(lt,{className:"h-4 w-4 text-green-400 shrink-0"}),e.jsx("span",{className:"text-sm text-white/80",children:s("trading.createAccountBenefit3")||"Low 0.05% platform fee"})]})]}),v&&e.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-white/5 rounded-lg",children:[e.jsx(Be,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground font-mono truncate",children:v})]}),e.jsx("button",{onClick:Us,disabled:Ft,className:"w-full py-3 rounded-xl font-bold text-black bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-400 hover:to-amber-400 disabled:opacity-50 disabled:cursor-not-allowed transition-all","data-testid":"button-create-account",children:Ft?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(se,{className:"h-4 w-4 animate-spin"}),s("trading.creatingAccount")||"Creating..."]}):s("trading.createAccount")||"Create Trading Account"})]})]}),document.body),Cs&&Ce.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4","data-testid":"no-slots-modal",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>Ye(!1)}),e.jsxs("div",{className:"relative bg-gradient-to-b from-[#1a1a2e] to-[#0d0d1a] border border-yellow-500/30 rounded-2xl p-6 max-w-md w-full shadow-2xl",children:[e.jsx("button",{onClick:()=>Ye(!1),className:"absolute top-4 right-4 text-white/60 hover:text-white text-xl",children:"×"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2","data-testid":"text-no-slots-title",children:s("trading.noSlots")||"No Slots Available"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:s("trading.noSlotsDesc")||"All trading slots are currently taken. Please contact admin to request a new slot."}),e.jsxs("a",{href:"https://t.me/TordLabs",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 bg-[#0088cc] hover:bg-[#0077b5] text-white font-semibold rounded-xl transition-colors w-full justify-center","data-testid":"button-contact-admin",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})}),s("trading.contactAdmin")||"Contact Admin on Telegram"]})]})]})]}),document.body)]})}function Tr({allTickers:s}){const o=["TORD","BTC","ETH","BNB","SOL","XRP","ADA","DOGE","AVAX","DOT","LINK","LTC","UNI","AAVE","NEAR","ARB","OP","SUI","SEI","TIA"];return e.jsx("div",{className:"flex items-center gap-6 animate-marquee",children:o.map(n=>{const u=`${n}USDT`,b=gt.find(i=>i.base===n),g=s[u],S=g?parseFloat(g.priceChangePercent):null,j=g?parseFloat(g.lastPrice):null,r=b?pt(b):"https://cdn.jsdelivr.net/npm/cryptocurrency-icons@latest/svg/color/generic.svg";return e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[e.jsx("img",{src:r,alt:n,className:"h-4 w-4 rounded-full",onError:i=>{i.target.src="https://cdn.jsdelivr.net/npm/cryptocurrency-icons@latest/svg/color/generic.svg"}}),e.jsx("span",{className:"text-white text-[11px] font-medium",children:n}),e.jsxs("span",{className:"text-white text-[11px] font-mono",children:["$",j?j>100?j.toLocaleString("en-US",{maximumFractionDigits:0}):j.toFixed(4):n==="TORD"?"0.0042":"---"]}),e.jsx("span",{className:`text-[11px] ${S!==null?S>=0?"text-green-400":"text-red-400":n==="TORD"?"text-green-400":"text-muted-foreground"}`,children:S!==null?`${S>=0?"+":""}${S}%`:n==="TORD"?"+12.5%":""})]},n)})})}export{Rr as default};
