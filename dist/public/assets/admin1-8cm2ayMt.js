import{c as v,s as K,r as a,G as n,b as I,W as z,j as e,p as A,g as d}from"./index-BO6UIVYb.js";import{I as m}from"./input-CEuhg7UK.js";import{a as x,L as V}from"./log-out-g70RlAZx.js";import{S as W,C as q}from"./settings-B43m1bnt.js";const F=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],J=v("link-2",F);const X=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Y=v("save",X);const Q=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Z=v("sparkles",Q),E={tord_contract:{label:"TORD Contract Address",placeholder:"0x...",group:"contracts",icon:z},staking_contract:{label:"Staking Contract Address",placeholder:"0x...",group:"contracts",icon:I},twitter_url:{label:"X (Twitter) URL",placeholder:"https://x.com/torddefi",group:"socials",icon:n},telegram_url:{label:"Telegram URL",placeholder:"https://t.me/TordLabs",group:"socials",icon:n},github_url:{label:"GitHub URL",placeholder:"https://github.com/tordlabs",group:"socials",icon:n},discord_url:{label:"Discord URL",placeholder:"https://discord.gg/...",group:"socials",icon:n},website_url:{label:"Website URL",placeholder:"https://tordlabs.com",group:"socials",icon:n}};function re(){const[,R]=K(),[i,l]=a.useState(()=>localStorage.getItem("admin_token")),[h,N]=a.useState(""),[u,w]=a.useState(""),[y,g]=a.useState(""),[S,b]=a.useState(!1),[p,o]=a.useState({}),[k,L]=a.useState(!1),[M,f]=a.useState(!1),[_,C]=a.useState(""),[P,j]=a.useState(!0),[U,c]=a.useState(!0);a.useEffect(()=>{i?O():(c(!1),j(!1))},[i]);async function O(){c(!0);try{if(!(await fetch("/api/admin/verify",{headers:{Authorization:`Bearer ${i}`}})).ok){localStorage.removeItem("admin_token"),l(null),c(!1),j(!1);return}const s=await fetch("/api/admin/settings",{headers:{Authorization:`Bearer ${i}`}});if(s.ok){const r=await s.json();o(r.settings||{})}}catch{localStorage.removeItem("admin_token"),l(null)}c(!1),j(!1)}async function $(t){t.preventDefault(),g(""),b(!0);try{const s=await fetch("/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:h,password:u})});if(!s.ok){g("Invalid username or password"),b(!1);return}const r=await s.json();localStorage.setItem("admin_token",r.token),l(r.token),N(""),w("")}catch{g("Connection error")}b(!1)}async function B(){await fetch("/api/admin/logout",{method:"POST",headers:{Authorization:`Bearer ${i}`}}).catch(()=>{}),localStorage.removeItem("admin_token"),l(null),o({})}async function G(){L(!0),C(""),f(!1);try{const t=await fetch("/api/admin/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({settings:p})});if(!t.ok)throw new Error("Failed to save");const s=await t.json();o(s.settings||{}),f(!0),setTimeout(()=>f(!1),3e3)}catch{C("Failed to save settings. Please try again.")}L(!1)}function T(t,s){o(r=>({...r,[t]:s}))}const H=Object.entries(E).filter(([t,s])=>s.group==="contracts"),D=Object.entries(E).filter(([t,s])=>s.group==="socials");return U?e.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:e.jsx(x,{className:"h-8 w-8 animate-spin text-amber-500"})}):i?P?e.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:e.jsx(x,{className:"h-8 w-8 animate-spin text-amber-500"})}):e.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:[e.jsx("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-black/80 backdrop-blur-xl",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-9 w-9 rounded-lg bg-gradient-to-br from-amber-500/20 to-amber-700/20 flex items-center justify-center border border-amber-500/30",children:e.jsx(W,{className:"h-5 w-5 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold","data-testid":"text-admin1-header",children:"Platform Settings"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Manage contract addresses & social links"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(d,{"data-testid":"button-goto-studio",variant:"ghost",size:"sm",onClick:()=>R("/admin"),className:"text-purple-400 hover:text-purple-300",children:[e.jsx(Z,{className:"h-4 w-4 mr-2"}),"AI Studio"]}),e.jsxs(d,{"data-testid":"button-admin1-logout",variant:"ghost",size:"sm",onClick:B,className:"text-muted-foreground hover:text-white",children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-8 space-y-8",children:[e.jsxs("section",{className:"bg-black/60 border border-white/10 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-blue-500/20 to-blue-700/20 flex items-center justify-center border border-blue-500/30",children:e.jsx(z,{className:"h-5 w-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-contracts-title",children:"Smart Contract Addresses"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"These addresses are used across staking, token analyzer, and other functions"})]})]}),e.jsx("div",{className:"space-y-4",children:H.map(([t,s])=>e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1.5 block",children:s.label}),e.jsx(m,{"data-testid":`input-setting-${t}`,value:p[t]||"",onChange:r=>T(t,r.target.value),placeholder:s.placeholder,className:"bg-white/5 border-white/10 text-white font-mono text-sm"})]},t))})]}),e.jsxs("section",{className:"bg-black/60 border border-white/10 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-purple-500/20 to-purple-700/20 flex items-center justify-center border border-purple-500/30",children:e.jsx(J,{className:"h-5 w-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold","data-testid":"text-socials-title",children:"Social Links"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Update social media links displayed across the platform"})]})]}),e.jsx("div",{className:"space-y-4",children:D.map(([t,s])=>e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1.5 block",children:s.label}),e.jsx(m,{"data-testid":`input-setting-${t}`,value:p[t]||"",onChange:r=>T(t,r.target.value),placeholder:s.placeholder,className:"bg-white/5 border-white/10 text-white text-sm"})]},t))})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(d,{"data-testid":"button-save-settings",onClick:G,disabled:k,className:"bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-black font-semibold px-8",children:[k?e.jsx(x,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Save All Settings"]}),M&&e.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm","data-testid":"text-save-success",children:[e.jsx(q,{className:"h-4 w-4"}),"Settings saved successfully"]}),_&&e.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm","data-testid":"text-save-error",children:[e.jsx(A,{className:"h-4 w-4"}),_]})]})]})]}):e.jsx("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-black/60 border border-white/10 rounded-2xl p-8",children:[e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsx("div",{className:"h-14 w-14 rounded-xl bg-gradient-to-br from-amber-500/20 to-amber-700/20 flex items-center justify-center border border-amber-500/30",children:e.jsx(I,{className:"h-7 w-7 text-amber-500"})})}),e.jsx("h1",{className:"text-2xl font-bold text-white text-center mb-1","data-testid":"text-admin1-title",children:"Settings Panel"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center mb-6",children:"Sign in to manage platform settings"}),e.jsxs("form",{onSubmit:$,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Username"}),e.jsx(m,{"data-testid":"input-admin1-username",value:h,onChange:t=>N(t.target.value),placeholder:"Enter username",className:"bg-white/5 border-white/10 text-white",autoComplete:"username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-muted-foreground mb-1 block",children:"Password"}),e.jsx(m,{"data-testid":"input-admin1-password",type:"password",value:u,onChange:t=>w(t.target.value),placeholder:"Enter password",className:"bg-white/5 border-white/10 text-white",autoComplete:"current-password"})]}),y&&e.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm","data-testid":"text-login1-error",children:[e.jsx(A,{className:"h-4 w-4"}),y]}),e.jsxs(d,{"data-testid":"button-admin1-login",type:"submit",disabled:S||!h||!u,className:"w-full bg-gradient-to-r from-amber-500 to-amber-600 hover:from-amber-600 hover:to-amber-700 text-black font-semibold",children:[S?e.jsx(x,{className:"h-4 w-4 animate-spin mr-2"}):null,"Sign In"]})]})]})})})}export{re as default};
